import{f as e,j as t}from"./chunk-DXw4Pgvm.js";import{f as r,g as a,r as n}from"./chunk-DZuWtVpy.js";import{r as s,a as i,b as o,c as l,j as c,e as d,u,U as h,G as p,A as f}from"../index-DRw3QGwP.js";import{T as m}from"./chunk-Cc81kOho.js";import{C as x}from"./chunk-BdC_xwe5.js";import{R as y}from"./chunk-wgyboZoI.js";import{a as g,p as j,f as v,C as b}from"./chunk-DdwiD4Er.js";import{I as w}from"./chunk-BBi3KYIR.js";import{F as T}from"./chunk-B22lRqIR.js";import{s as k,z as M,a as L,b as z,m as C,c as _,d as I,x as A,y as E,e as $,h as O,t as R,f as W,g as B,i as S}from"./chunk-B3rfJhtT.js";import{u as P}from"./chunk-CM3g5OHp.js";import{p as N,i as F,k as q,B as G,a as D,o as H,T as J,ae as U,S as K,q as Q,s as X,u as Y}from"./chunk-CSjZqX98.js";import"./chunk-DhsIgqDf.js";var V,Z,ee,te={exports:{}},re={},ae={};function ne(){if(V)return ae;V=1,Object.defineProperty(ae,"__esModule",{value:!0});return ae.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},ae}function se(){if(Z)return re;Z=1;var e=s().default,t=i().default;Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var a=t(o()),n=e(r()),c=t(ne()),d=t(l()),u=function(e,t){return n.createElement(d.default,(0,a.default)({},e,{ref:t,icon:c.default}))},h=n.forwardRef(u);return re.default=h,re}function ie(){return ee||(ee=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r;const a=(r=se())&&r.__esModule?r:{default:r};t.default=a,e.exports=a}(te,te.exports)),te.exports}const oe=a(ie());var le,ce,de,ue={exports:{}},he={},pe={};function fe(){if(le)return pe;le=1,Object.defineProperty(pe,"__esModule",{value:!0});return pe.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},pe}function me(){if(ce)return he;ce=1;var e=s().default,t=i().default;Object.defineProperty(he,"__esModule",{value:!0}),he.default=void 0;var a=t(o()),n=e(r()),c=t(fe()),d=t(l()),u=function(e,t){return n.createElement(d.default,(0,a.default)({},e,{ref:t,icon:c.default}))},h=n.forwardRef(u);return he.default=h,he}function xe(){return de||(de=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r;const a=(r=me())&&r.__esModule?r:{default:r};t.default=a,e.exports=a}(ue,ue.exports)),ue.exports}const ye=a(xe());var ge,je,ve,be={exports:{}},we={},Te={};function ke(){if(ge)return Te;ge=1,Object.defineProperty(Te,"__esModule",{value:!0});return Te.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},Te}function Me(){if(je)return we;je=1;var e=s().default,t=i().default;Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var a=t(o()),n=e(r()),c=t(ke()),d=t(l()),u=function(e,t){return n.createElement(d.default,(0,a.default)({},e,{ref:t,icon:c.default}))},h=n.forwardRef(u);return we.default=h,we}function Le(){return ve||(ve=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r;const a=(r=Me())&&r.__esModule?r:{default:r};t.default=a,e.exports=a}(be,be.exports)),be.exports}const ze=a(Le()),{Title:Ce,Text:_e}=J,Ie=()=>{const{t:r}=P("system"),{data:a,isLoading:s,error:i,refetch:o}=e({queryKey:["companyArchitecture"],queryFn:async()=>{const e=await c.post("/GetCompanyDataGraphJson",{});if(0!==e.failure)throw new Error(e.errors?.join(", ")||"Failed to fetch company architecture");const t=g(e,1,[]),r=t[0]?.companyDataGraph;if(!r)throw new Error("No architecture data returned");try{const{metadata:e,nodes:t,relationships:a,summary:n}=j(r,["metadata","nodes","relationships","summary"]);return v(t,["users"]),["machines","repositories","storages"].forEach(e=>{t[e]||(t[e]=[])}),{metadata:e,nodes:t,relationships:a,summary:n}}catch(a){throw new Error("Invalid JSON data returned from server")}},staleTime:6e4,refetchInterval:3e5}),[l,J]=n.useState("hierarchy"),[V,Z]=n.useState(!1),[ee,te]=n.useState(["company","user","team","region","bridge","machine","repository","storage"]),[re,ae]=n.useState(!1),ne=n.useRef(null),se=n.useRef(null),{theme:ie}=d(),le=u(),ce=[{value:"company",label:r("architecture.nodeCompany"),icon:"🏢"},{value:"user",label:r("architecture.nodeUser"),icon:"👤"},{value:"team",label:r("architecture.nodeTeam"),icon:"👥"},{value:"region",label:r("architecture.nodeRegion"),icon:"🌍"},{value:"bridge",label:r("architecture.nodeBridge"),icon:"🌉"},{value:"machine",label:r("architecture.nodeMachine"),icon:"💻"},{value:"repository",label:r("architecture.nodeRepository"),icon:"📦"},{value:"storage",label:r("architecture.nodeStorage"),icon:"💾"}],de=e=>({company:"🏢",user:"👤",team:"👥",region:"📍",bridge:"🔌",machine:"💻",repository:"📁",storage:"☁️"}[e]||"📌"),ue=e=>("dark"===ie?{company:"#4a5568",user:"#5a6778",team:"#6a7788",region:"#7a8798",bridge:"#8a97a8",machine:"#9aa7b8",repository:"#aab7c8",storage:"#cad7e8"}:{company:"#e0e0e0",user:"#d6d6d6",team:"#cccccc",region:"#c2c2c2",bridge:"#b8b8b8",machine:"#aeaeae",repository:"#a4a4a4",storage:"#909090"})[e]||("dark"===ie?"#6a7788":"#cccccc");n.useEffect(()=>{if(!a||!ne.current||!se.current)return;ae(!0);const e=se.current.clientWidth||800,t=600,n=((e,t)=>{const r=[];return Object.entries(e).forEach(([e,a])=>{Array.isArray(a)&&a.length>0&&a.forEach(a=>{const n=a.nodeType||e.slice(0,-1);if(t.includes(n)){const e={...a,nodeType:n};r.push(e)}})}),r})(a.nodes,ee),s=((e,t)=>{const r=[],a=new Map(t.map(e=>[e.nodeId,e]));return Object.entries(e).forEach(([,e])=>{Array.isArray(e)&&e.forEach(e=>{const t=a.get(e.source),n=a.get(e.target);t&&n&&r.push({source:t,target:n,relationshipType:e.relationshipType,label:e.label})})}),r})(a.relationships,n);if(0===n.length){k(ne.current).selectAll("*").remove();return void k(ne.current).attr("width",e).attr("height",t).append("text").attr("x",e/2).attr("y",300).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","16px").style("fill","#999").text(r("architecture.noEntitiesSelected",{ns:"system"}))}k(ne.current).selectAll("*").remove();const i=k(ne.current).attr("width",e).attr("height",t),o=i.append("g").attr("class","main-group"),c=M().scaleExtent([.1,4]).on("zoom",e=>{o.attr("transform",e.transform)});i.call(c);if(i.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",20).attr("refY",0).attr("orient","auto").attr("markerWidth",8).attr("markerHeight",8).append("path").attr("d","M 0,-5 L 10,0 L 0,5").attr("fill","dark"===ie?"#999":"#666"),"force"===l){n.forEach(t=>{t.x=e/2+100*(Math.random()-.5),t.y=300+100*(Math.random()-.5)});const t=s.map(e=>({source:e.source.nodeId,target:e.target.nodeId,relationshipType:e.relationshipType,label:e.label})),r=L(n).force("link",z(t).id(e=>e.nodeId).distance(150)).force("charge",C().strength(-500)).force("center",_(e/2,300)).force("collision",I().radius(40)).force("x",A(e/2).strength(.1)).force("y",E(300).strength(.1)),a=o.append("g").selectAll("line").data(t).join("line").attr("stroke","#cccccc").attr("stroke-opacity",.6).attr("stroke-width",2).attr("marker-end","url(#arrowhead)"),i=o.append("g").selectAll("g").data(n).join("g");i.call($().on("start",(e,t)=>{e.active||r.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||r.alphaTarget(0),t.fx=null,t.fy=null})),i.append("circle").attr("r",20).attr("fill",e=>ue(e.nodeType)).attr("stroke","#333").attr("stroke-width",2).style("cursor","pointer").style("transition","all 0.2s ease").on("mouseenter",function(e,t){k(this).attr("r",24).attr("stroke-width",3).style("filter","brightness(1.1)")}).on("mouseleave",function(e,t){k(this).attr("r",20).attr("stroke-width",2).style("filter","none")}),i.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","16px").text(e=>de(e.nodeType)),i.append("text").attr("dy",35).attr("text-anchor","middle").style("font-size","12px").style("fill","dark"===ie?"#e8e8e8":"#1a1a1a").style("font-weight","500").style("text-shadow","dark"===ie?"1px 1px 2px rgba(0,0,0,0.8)":"1px 1px 2px rgba(255,255,255,0.8)").text(e=>e.name),i.append("title").text(e=>{const t=[`Type: ${e.nodeType}`,`Name: ${e.name}`];return"team"===e.nodeType&&void 0!==e.memberCount&&(t.push(`Members: ${e.memberCount}`),t.push(`Machines: ${e.machineCount||0}`)),"machine"===e.nodeType&&void 0!==e.queueCount&&(t.push(`Queue Items: ${e.queueCount}`),t.push(`Region: ${e.regionName}`)),t.join("\n")}),r.on("tick",()=>{a.attr("x1",e=>e.source.x||0).attr("y1",e=>e.source.y||0).attr("x2",e=>e.target.x||0).attr("y2",e=>e.target.y||0),i.attr("transform",e=>`translate(${e.x||0},${e.y||0})`)}),r.alpha(1).restart()}else if("hierarchy"===l){const t=n.find(e=>"company"===e.nodeType);if(!t)return;const r={...t,children:[]},a=n.filter(e=>"team"===e.nodeType),i=n.filter(e=>"region"===e.nodeType),l=n.filter(e=>"user"===e.nodeType),c=n.filter(e=>"bridge"===e.nodeType),d=n.filter(e=>"machine"===e.nodeType),u=n.filter(e=>"repository"===e.nodeType),h=n.filter(e=>"storage"===e.nodeType),p=a.map(e=>{const t=[],r=l.filter(t=>s.some(r=>r.source===t&&r.target===e&&"memberOf"===r.relationshipType));t.push(...r);const a=d.filter(t=>t.parentTeam===e.nodeId);t.push(...a);const n=u.filter(t=>t.parentTeam===e.nodeId);t.push(...n);const i=h.filter(t=>t.parentTeam===e.nodeId);return t.push(...i),{...e,children:t.length>0?t:[]}}),f=i.map(e=>{const t=c.filter(t=>t.parentRegion===e.nodeId).map(e=>({...e,children:d.filter(t=>t.parentBridge===e.nodeId)}));return{...e,children:t}});r.children=[...p,...f],0===r.children.length&&(r.children=[{nodeId:"placeholder",name:"No child nodes",nodeType:"placeholder",hierarchyLevel:"level1"}]);const m=O(r),x=R().size([e-100,500])(m);o.append("g").selectAll("path").data(x.links()).join("path").attr("d",W().x(e=>e.x+50).y(e=>e.y+50)).attr("fill","none").attr("stroke","#cccccc").attr("stroke-width",2);const y=o.append("g").selectAll("g").data(x.descendants()).join("g").attr("transform",e=>`translate(${e.x+50},${e.y+50})`);y.append("circle").attr("r",20).attr("fill",e=>"placeholder"===e.data.nodeType?"#ccc":ue(e.data.nodeType)).attr("stroke","#333").attr("stroke-width",2).style("cursor",e=>"placeholder"===e.data.nodeType?"default":"pointer").style("transition","all 0.2s ease").on("mouseenter",function(e,t){"placeholder"!==t.data.nodeType&&k(this).attr("r",24).attr("stroke-width",3).style("filter","brightness(1.1)")}).on("mouseleave",function(e,t){"placeholder"!==t.data.nodeType&&k(this).attr("r",20).attr("stroke-width",2).style("filter","none")}),y.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","16px").text(e=>"placeholder"===e.data.nodeType?"?":de(e.data.nodeType)),y.append("text").attr("dy",35).attr("text-anchor","middle").style("font-size","12px").style("fill","dark"===ie?"#e8e8e8":"#1a1a1a").style("font-weight","500").style("text-shadow","dark"===ie?"1px 1px 2px rgba(0,0,0,0.8)":"1px 1px 2px rgba(255,255,255,0.8)").text(e=>e.data.name),y.append("title").text(e=>{if("placeholder"===e.data.nodeType)return"No child nodes available";const t=[`Type: ${e.data.nodeType}`,`Name: ${e.data.name}`];return"team"===e.data.nodeType&&void 0!==e.data.memberCount&&(t.push(`Members: ${e.data.memberCount}`),t.push(`Machines: ${e.data.machineCount||0}`)),"bridge"===e.data.nodeType&&void 0!==e.data.machineCount&&t.push(`Machines: ${e.data.machineCount}`),t.join("\n")})}else if("radial"===l){const r=e/2,a=300,i=Math.min(e,t)/3,l=B(n,e=>e.nodeType),c=Array.from(l.keys()),d=2*Math.PI/c.length;c.forEach((e,t)=>{const n=t*d,s=l.get(e)||[],o=i*("company"===e?0:1);s.forEach((e,t)=>{const i=n+t/s.length*d;e.x=r+o*Math.cos(i),e.y=a+o*Math.sin(i)})}),o.append("g").selectAll("line").data(s).join("line").attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y).attr("stroke","#cccccc").attr("stroke-opacity",.6).attr("stroke-width",2);const u=o.append("g").selectAll("g").data(n).join("g").attr("transform",e=>`translate(${e.x},${e.y})`);u.append("circle").attr("r",20).attr("fill",e=>ue(e.nodeType)).attr("stroke","#333").attr("stroke-width",2).style("cursor","pointer").style("transition","all 0.2s ease").on("mouseenter",function(e,t){k(this).attr("r",24).attr("stroke-width",3).style("filter","brightness(1.1)")}).on("mouseleave",function(e,t){k(this).attr("r",20).attr("stroke-width",2).style("filter","none")}),u.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","16px").text(e=>de(e.nodeType)),u.append("text").attr("dy",35).attr("text-anchor","middle").style("font-size","12px").style("fill","dark"===ie?"#e8e8e8":"#1a1a1a").style("font-weight","500").style("text-shadow","dark"===ie?"1px 1px 2px rgba(0,0,0,0.8)":"1px 1px 2px rgba(255,255,255,0.8)").text(e=>e.name)}setTimeout(()=>{const r=o.node()?.getBBox();if(r&&r.width>0&&r.height>0){const a=r.width,n=r.height,s=r.x+a/2,o=r.y+n/2,l=Math.max(.5,Math.min(2,.9/Math.max(a/e,n/t))),d=[e/2-l*s,300-l*o];i.call(c.transform,S.translate(d[0],d[1]).scale(l))}},"force"===l?1e3:100),setTimeout(()=>{ae(!1)},"force"===l?1100:200)},[a,l,V,ee,r]);if(s)return t.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[t.jsx(N,{size:"large"}),t.jsx("div",{style:{marginTop:16,color:"var(--ant-color-text-secondary)"},children:r("messages.loading",{ns:"common"})})]});if(i)return t.jsx(F,{message:r("messages.error",{ns:"common"}),description:i instanceof Error?i.message:r("architecture.fetchError"),type:"error",showIcon:!0,action:t.jsx(q,{title:r("actions.retry",{ns:"common"}),children:t.jsx(G,{size:"small",icon:t.jsx(y,{}),onClick:()=>o(),"aria-label":r("actions.retry",{ns:"common"})})})});if(!a)return t.jsx(F,{message:r("architecture.noData"),type:"info",showIcon:!0});const he={users:ee.includes("user")&&a.nodes.users?.length||0,teams:ee.includes("team")&&a.nodes.teams?.length||0,machines:ee.includes("machine")&&a.nodes.machines?.length||0,regions:ee.includes("region")&&a.nodes.regions?.length||0,bridges:ee.includes("bridge")&&a.nodes.bridges?.length||0,repositories:ee.includes("repository")&&a.nodes.repositories?.length||0,storages:ee.includes("storage")&&a.nodes.storages?.length||0};return t.jsx("div",{"data-testid":"architecture-page",children:t.jsxs(D,{direction:"vertical",size:"large",style:{width:"100%"},children:[t.jsx(H,{style:le.card,children:t.jsxs(D,{direction:"vertical",size:"middle",style:{width:"100%"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(Ce,{level:4,style:{...le.heading4,margin:0},children:r("architecture.title")}),t.jsxs(D,{children:[t.jsxs(U.Group,{value:l,onChange:e=>J(e.target.value),"data-testid":"architecture-view-mode-selector",children:[t.jsx(U.Button,{value:"hierarchy","data-testid":"architecture-view-hierarchy",children:r("architecture.viewHierarchy")}),t.jsx(U.Button,{value:"force","data-testid":"architecture-view-force",children:r("architecture.viewForce")}),t.jsx(U.Button,{value:"radial","data-testid":"architecture-view-radial",children:r("architecture.viewRadial")})]}),t.jsx(q,{title:r("actions.refresh",{ns:"common"}),children:t.jsx(G,{icon:t.jsx(y,{}),style:le.touchTarget,onClick:()=>o(),"data-testid":"architecture-refresh-button"})}),t.jsx(q,{title:r(V?"actions.exitFullscreen":"actions.fullscreen",{ns:"common"}),children:t.jsx(G,{icon:V?t.jsx(ye,{}):t.jsx(ze,{}),style:le.touchTarget,onClick:()=>{se.current&&(V?(document.exitFullscreen?.(),Z(!1)):(se.current.requestFullscreen?.(),Z(!0)))},"data-testid":"architecture-fullscreen-button"})})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",alignItems:window.innerWidth<768?"stretch":"center",gap:window.innerWidth<768?"12px":"16px"},children:[t.jsxs(D,{align:"center",style:{marginBottom:window.innerWidth<768?"8px":"0"},children:[t.jsx(T,{style:{color:"#556b2f"}}),t.jsx(_e,{strong:!0,children:r("architecture.filterEntities",{ns:"system"})})]}),t.jsx(K,{mode:"multiple",allowClear:!0,placeholder:r("architecture.selectEntities",{ns:"system"}),value:ee,onChange:te,style:{minWidth:window.innerWidth<768?"100%":400,minHeight:window.innerWidth<768?"44px":"auto"},maxTagCount:window.innerWidth<768?2:3,maxTagPlaceholder:e=>`+${e.length} more`,"data-testid":"architecture-entity-filter",children:ce.map(e=>t.jsx(K.Option,{value:e.value,"data-testid":`architecture-filter-${e.value}`,children:t.jsxs(D,{children:[t.jsx("span",{children:e.icon}),t.jsx("span",{children:e.label})]})},e.value))}),t.jsxs(D,{style:{justifyContent:window.innerWidth<768?"space-between":"flex-start",width:window.innerWidth<768?"100%":"auto"},children:[t.jsx(q,{title:r("architecture.selectAll",{ns:"system"}),children:t.jsx(G,{icon:t.jsx(b,{}),size:"small",style:{...le.touchTargetSmall,flex:window.innerWidth<768?"1":"none"},onClick:()=>te(ce.map(e=>e.value)),"data-testid":"architecture-select-all-button","aria-label":r("architecture.selectAll",{ns:"system"})})}),t.jsx(q,{title:r("architecture.clearAll",{ns:"system"}),children:t.jsx(G,{icon:t.jsx(oe,{}),size:"small",style:{...le.touchTargetSmall,flex:window.innerWidth<768?"1":"none",marginLeft:window.innerWidth<768?"8px":"0"},onClick:()=>te([]),"data-testid":"architecture-clear-all-button","aria-label":r("architecture.clearAll",{ns:"system"})})})]})]}),t.jsxs(Q,{gutter:16,children:[t.jsx(X,{span:3,children:t.jsx(Y,{title:r("architecture.users"),value:he.users,prefix:t.jsx(h,{})})}),t.jsx(X,{span:3,children:t.jsx(Y,{title:r("architecture.teams"),value:he.teams,prefix:t.jsx(m,{})})}),t.jsx(X,{span:3,children:t.jsx(Y,{title:r("architecture.machines"),value:he.machines,prefix:t.jsx(x,{})})}),t.jsx(X,{span:3,children:t.jsx(Y,{title:r("architecture.regions"),value:he.regions,prefix:t.jsx(p,{})})}),t.jsx(X,{span:3,children:t.jsx(Y,{title:r("architecture.bridges"),value:he.bridges,prefix:t.jsx(f,{})})}),t.jsx(X,{span:3,children:t.jsx(Y,{title:r("architecture.repositories"),value:he.repositories,prefix:t.jsx(w,{})})}),t.jsx(X,{span:3,children:t.jsx(Y,{title:r("architecture.storages"),value:he.storages,prefix:t.jsx(x,{})})})]})]})}),t.jsx(H,{style:le.card,children:t.jsxs("div",{ref:se,style:{width:"100%",height:"600px",overflow:"hidden",position:"relative"},"data-testid":"architecture-visualization-container",children:[re&&t.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:[t.jsx(N,{size:"large"}),t.jsx("div",{style:{marginTop:16,color:"var(--ant-color-text-secondary)"},children:r("messages.loading",{ns:"common"})})]}),t.jsx("svg",{ref:ne,style:{width:"100%",height:"100%"},"data-testid":"architecture-svg"})]})}),t.jsx(H,{title:r("architecture.legend"),style:le.card,children:t.jsx(Q,{gutter:[16,16],children:Object.entries({company:r("architecture.nodeCompany"),user:r("architecture.nodeUser"),team:r("architecture.nodeTeam"),region:r("architecture.nodeRegion"),bridge:r("architecture.nodeBridge"),machine:r("architecture.nodeMachine"),repository:r("architecture.nodeRepository"),storage:r("architecture.nodeStorage")}).map(([e,r])=>t.jsx(X,{span:6,"data-testid":`architecture-legend-${e}`,children:t.jsxs(D,{children:[t.jsx("div",{style:{width:24,height:24,borderRadius:"50%",backgroundColor:ue(e),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:de(e)}),t.jsx(_e,{children:r})]})},e))})})]})})};export{Ie as default};
