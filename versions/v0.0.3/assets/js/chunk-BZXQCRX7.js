import{f as e,g as t,r as s}from"./chunk-DZuWtVpy.js";import{r as a,a as i,b as n,c as r,k as l,i as u,v as o,u as c,e as d,l as h,C as m,W as f,E as p,f as g,s as x,D as y,U as I,h as j,B as k,T,w as D}from"../index-DSl6tB1Y.js";import{u as E,j as S}from"./chunk-DXw4Pgvm.js";import{T as v}from"./chunk-CELZejq7.js";import{S as C}from"./chunk-DZj1JBjC.js";import{R as q}from"./chunk-BQHEfh2k.js";import{d as N,e as R,c as b,C as P,S as _,Q as L,R as A}from"./chunk-C5gRh9ZX.js";import{C as M}from"./chunk-Ekt-wxAe.js";import{C as w}from"./chunk-3MhT80L5.js";import{F as O}from"./chunk-CwfvIn2J.js";import{d as F,M as G,p as B,i as U,B as H,o as z,a as Q,T as Y,P as V,n as $,q as K,s as X,g as J,ad as W,ag as Z,k as ee,u as te,h as se,v as ae,V as ie,E as ne,Q as re,m as le}from"./chunk-CSjZqX98.js";import{a as ue}from"./chunk-xSw6NTs2.js";import{u as oe}from"./chunk-CM3g5OHp.js";var ce,de,he,me={exports:{}},fe={},pe={};function ge(){if(ce)return pe;ce=1,Object.defineProperty(pe,"__esModule",{value:!0});return pe.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"},pe}function xe(){if(de)return fe;de=1;var t=a().default,s=i().default;Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var l=s(n()),u=t(e()),o=s(ge()),c=s(r()),d=function(e,t){return u.createElement(c.default,(0,l.default)({},e,{ref:t,icon:o.default}))},h=u.forwardRef(d);return fe.default=h,fe}function ye(){return he||(he=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s;const a=(s=xe())&&s.__esModule?s:{default:s};t.default=a,e.exports=a}(me,me.exports)),me.exports}const Ie=t(ye());var je,ke,Te,De={exports:{}},Ee={},Se={};function ve(){if(je)return Se;je=1,Object.defineProperty(Se,"__esModule",{value:!0});return Se.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Se}function Ce(){if(ke)return Ee;ke=1;var t=a().default,s=i().default;Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var l=s(n()),u=t(e()),o=s(ve()),c=s(r()),d=function(e,t){return u.createElement(c.default,(0,l.default)({},e,{ref:t,icon:o.default}))},h=u.forwardRef(d);return Ee.default=h,Ee}function qe(){return Te||(Te=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s;const a=(s=Ce())&&s.__esModule?s:{default:s};t.default=a,e.exports=a}(De,De.exports)),De.exports}const Ne=t(qe());var Re,be,Pe,_e={exports:{}},Le={},Ae={};function Me(){if(Re)return Ae;Re=1,Object.defineProperty(Ae,"__esModule",{value:!0});return Ae.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M742 318V184h86c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h86v134c0 81.5 42.4 153.2 106.4 194-64 40.8-106.4 112.5-106.4 194v134h-86c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h632c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-86V706c0-81.5-42.4-153.2-106.4-194 64-40.8 106.4-112.5 106.4-194zm-72 388v134H354V706c0-42.2 16.4-81.9 46.3-111.7C430.1 564.4 469.8 548 512 548s81.9 16.4 111.7 46.3C653.6 624.1 670 663.8 670 706zm0-388c0 42.2-16.4 81.9-46.3 111.7C593.9 459.6 554.2 476 512 476s-81.9-16.4-111.7-46.3A156.63 156.63 0 01354 318V184h316v134z"}}]},name:"hourglass",theme:"outlined"},Ae}function we(){if(be)return Le;be=1;var t=a().default,s=i().default;Object.defineProperty(Le,"__esModule",{value:!0}),Le.default=void 0;var l=s(n()),u=t(e()),o=s(Me()),c=s(r()),d=function(e,t){return u.createElement(c.default,(0,l.default)({},e,{ref:t,icon:o.default}))},h=u.forwardRef(d);return Le.default=h,Le}function Oe(){return Pe||(Pe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s;const a=(s=we())&&s.__esModule?s:{default:s};t.default=a,e.exports=a}(_e,_e.exports)),_e.exports}const Fe=t(Oe());var Ge,Be,Ue,He={exports:{}},ze={},Qe={};function Ye(){if(Ge)return Qe;Ge=1,Object.defineProperty(Qe,"__esModule",{value:!0});return Qe.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 552h63.6c4.4 0 8-3.6 8-8V288.7h528.6v72.6c0 1.9.6 3.7 1.8 5.2a8.3 8.3 0 0011.7 1.4L893 255.4c4.3-5 3.6-10.3 0-13.2L749.7 129.8a8.22 8.22 0 00-5.2-1.8c-4.6 0-8.4 3.8-8.4 8.4V209H199.7c-39.5 0-71.7 32.2-71.7 71.8V544c0 4.4 3.6 8 8 8zm752-80h-63.6c-4.4 0-8 3.6-8 8v255.3H287.8v-72.6c0-1.9-.6-3.7-1.8-5.2a8.3 8.3 0 00-11.7-1.4L131 768.6c-4.3 5-3.6 10.3 0 13.2l143.3 112.4c1.5 1.2 3.3 1.8 5.2 1.8 4.6 0 8.4-3.8 8.4-8.4V815h536.6c39.5 0 71.7-32.2 71.7-71.8V480c-.2-4.4-3.8-8-8.2-8z"}}]},name:"retweet",theme:"outlined"},Qe}function Ve(){if(Be)return ze;Be=1;var t=a().default,s=i().default;Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=void 0;var l=s(n()),u=t(e()),o=s(Ye()),c=s(r()),d=function(e,t){return u.createElement(c.default,(0,l.default)({},e,{ref:t,icon:o.default}))},h=u.forwardRef(d);return ze.default=h,ze}function $e(){return Ue||(Ue=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s;const a=(s=Ve())&&s.__esModule?s:{default:s};t.default=a,e.exports=a}(He,He.exports)),He.exports}const Ke=t($e());var Xe,Je,We,Ze={exports:{}},et={},tt={};function st(){if(Xe)return tt;Xe=1,Object.defineProperty(tt,"__esModule",{value:!0});return tt.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},tt}function at(){if(Je)return et;Je=1;var t=a().default,s=i().default;Object.defineProperty(et,"__esModule",{value:!0}),et.default=void 0;var l=s(n()),u=t(e()),o=s(st()),c=s(r()),d=function(e,t){return u.createElement(c.default,(0,l.default)({},e,{ref:t,icon:o.default}))},h=u.forwardRef(d);return et.default=h,et}function it(){return We||(We=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s;const a=(s=at())&&s.__esModule?s:{default:s};t.default=a,e.exports=a}(Ze,Ze.exports)),Ze.exports}const nt=t(it());const rt=new class{queue=[];activeTasks=new Map;taskIdToBridge=new Map;isProcessing=!1;processingInterval=null;MAX_RETRIES=3;SUBMISSION_DELAY=100;HIGHEST_PRIORITY=1;listeners=[];constructor(){this.isExtensionContext()?setTimeout(()=>this.startProcessing(),1200):this.startProcessing()}isExtensionContext(){try{return"undefined"!=typeof chrome&&void 0!==chrome.runtime&&void 0!==chrome.runtime.id}catch{return!1}}hasActivePriority1Task(e,t){const s=this.activeTasks.get(e);if(s&&s.priority===this.HIGHEST_PRIORITY)return!0;return!!this.queue.find(s=>s.id!==t&&s.data.bridgeName===e&&s.data.priority===this.HIGHEST_PRIORITY&&["pending","submitting"].includes(s.status))}cancelExistingTasks(e,t){this.queue.forEach(s=>{s.data.bridgeName===e&&s.data.machineName===t&&"pending"===s.status&&(s.status="cancelled")})}trackActiveTask(e){const t=e.bridgeName;this.activeTasks.set(t,e),e.priority===this.HIGHEST_PRIORITY&&this.taskIdToBridge.set(e.taskId,e.bridgeName)}_removeActiveTaskByBridge(e){return this.activeTasks.delete(e)}async startMonitoringTask(e,t){try{ut.addTask(e,t.teamName,t.machineName,"PENDING",void 0,void 0,t.bridgeName,t.priority)}catch(s){}}async addToQueue(e,t){const s=`queue-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,a={id:s,data:e,retryCount:0,status:"pending",timestamp:Date.now(),submitFunction:t};if(e.priority===this.HIGHEST_PRIORITY){if(this.hasActivePriority1Task(e.bridgeName))throw l("warning",`You already have a highest priority task running on bridge ${e.bridgeName}. Please wait for it to complete.`),new Error("Already have a priority 1 task on this bridge");this.cancelExistingTasks(e.bridgeName,e.machineName),this.queue.push(a),this.notifyListeners(),l("info",`Highest priority task queued. Position: ${this.queue.length}`),this.isProcessing||this.startProcessing()}else try{a.status="submitting";const i=await t(e);return a.status="submitted",i.taskId||s}catch(i){throw a.status="failed",i}return s}getQueue(){return[...this.queue]}getQueueStats(){return{total:this.queue.length,pending:this.queue.filter(e=>"pending"===e.status).length,submitting:this.queue.filter(e=>"submitting"===e.status).length,submitted:this.queue.filter(e=>"submitted"===e.status).length,failed:this.queue.filter(e=>"failed"===e.status).length,highestPriority:this.queue.filter(e=>e.data.priority===this.HIGHEST_PRIORITY).length}}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){const e=this.getQueue();this.listeners.forEach(t=>t(e))}startProcessing(){this.isProcessing||(this.isProcessing=!0,this.processingInterval=setInterval(()=>{this.processQueue()},this.SUBMISSION_DELAY))}stopProcessing(){this.isProcessing=!1,this.processingInterval&&(clearInterval(this.processingInterval),this.processingInterval=null)}async processQueue(){const e=this.queue.find(e=>"pending"===e.status);if(!e)return this.queue=this.queue.filter(e=>"pending"===e.status||"submitting"===e.status),0===this.queue.length&&this.stopProcessing(),void this.notifyListeners();if(e.data.priority===this.HIGHEST_PRIORITY&&this.hasActivePriority1Task(e.data.bridgeName,e.id))return e.status="cancelled",this.notifyListeners(),void l("info","Task cancelled: Already have a priority 1 task on this bridge");e.status="submitting",this.notifyListeners();try{const t=await e.submitFunction(e.data);if(e.taskId=t.taskId||t.id,e.data.priority===this.HIGHEST_PRIORITY&&e.taskId){const t={bridgeName:e.data.bridgeName,machineName:e.data.machineName,taskId:e.taskId,priority:e.data.priority,status:"pending",timestamp:Date.now()};this.trackActiveTask(t),this.startMonitoringTask(e.taskId,e.data)}e.status="submitted",this.notifyListeners(),l("success","Queue item submitted successfully"+(e.taskId?` (ID: ${e.taskId})`:""))}catch(t){e.retryCount++,e.retryCount<this.MAX_RETRIES?(e.status="pending",l("warning",`Queue submission failed, will retry (${e.retryCount}/${this.MAX_RETRIES})`)):(e.status="failed",l("error",`Queue submission failed after ${this.MAX_RETRIES} attempts: ${t.message}`)),this.notifyListeners()}}removeFromQueue(e){this.queue=this.queue.filter(t=>t.id!==e),this.notifyListeners()}retryItem(e){const t=this.queue.find(t=>t.id===e);t&&"failed"===t.status&&(t.status="pending",t.retryCount=0,this.notifyListeners(),this.isProcessing||this.startProcessing())}clearCompleted(){this.queue=this.queue.filter(e=>"pending"===e.status||"submitting"===e.status),this.notifyListeners()}getQueuePosition(e){const t=this.queue.filter(e=>"pending"===e.status).findIndex(t=>t.id===e);return-1===t?-1:t+1}getQueueItem(e){return this.queue.find(t=>t.id===e)}subscribeToQueueItem(e,t){const s=s=>{const a=s.find(t=>t.id===e);t(a)};return this.listeners.push(s),s(this.queue),()=>{this.listeners=this.listeners.filter(e=>e!==s)}}updateTaskStatus(e,t){let s=null;const a=this.taskIdToBridge.get(e);if(a){const i=this.activeTasks.get(a);i&&i.taskId===e&&("completed"!==t&&"failed"!==t&&"cancelled"!==t||(this.activeTasks.delete(a),this.taskIdToBridge.delete(e),s=a))}if(!s)for(const[i,n]of this.activeTasks)if(n.taskId===e&&n.priority===this.HIGHEST_PRIORITY&&("completed"===t||"failed"===t||"cancelled"===t)){this.activeTasks.delete(i),this.taskIdToBridge.delete(e),s=i;break}if(!s){const a=this.queue.find(t=>t.taskId===e);if(a&&a.data.priority===this.HIGHEST_PRIORITY){const i=a.data.bridgeName;if(this.activeTasks.has(i)){const t=this.activeTasks.get(i);t&&t.taskId===e&&(this.activeTasks.delete(i),this.taskIdToBridge.delete(e),s=i)}"completed"!==t&&"failed"!==t&&"cancelled"!==t||(a.status="submitted")}}this.notifyListeners()}getActiveTasks(){return Array.from(this.activeTasks.values())}canSubmitTask(e,t){return t!==this.HIGHEST_PRIORITY||!this.hasActivePriority1Task(e)}clearCancelled(){this.queue=this.queue.filter(e=>"cancelled"!==e.status),this.notifyListeners()}clearBridgeTask(e){const t=this.activeTasks.get(e);return!!t&&(this.activeTasks.delete(e),t.priority===this.HIGHEST_PRIORITY&&this.taskIdToBridge.delete(t.taskId),this.notifyListeners(),!0)}clearAllStuckTasks(){let e=0;const t=[];for(const[s,a]of this.activeTasks)a.priority===this.HIGHEST_PRIORITY&&t.push(s);for(const s of t){const t=this.activeTasks.get(s);t&&(this.activeTasks.delete(s),this.taskIdToBridge.delete(t.taskId),e++)}return e>0&&this.notifyListeners(),e}getDebugInfo(){return{activeTasks:Array.from(this.activeTasks.entries()).map(([e,t])=>({key:e,...t,age:Math.floor((Date.now()-t.timestamp)/1e3)+" seconds"})),taskIdMappings:Array.from(this.taskIdToBridge.entries()).map(([e,t])=>({taskId:e,bridge:t})),queuedTasks:this.queue.filter(e=>e.data.priority===this.HIGHEST_PRIORITY&&["pending","submitting"].includes(e.status)).map(e=>({id:e.id,status:e.status,bridgeName:e.data.bridgeName,machineName:e.data.machineName,taskId:e.taskId}))}}getActivePriority1CountByBridge(){const e=new Map;for(const t of this.activeTasks.values())if(t.priority===this.HIGHEST_PRIORITY){const s=e.get(t.bridgeName)||0;e.set(t.bridgeName,s+1)}return this.queue.forEach(t=>{if(t.data.priority===this.HIGHEST_PRIORITY&&["pending","submitting","submitted"].includes(t.status)){const s=e.get(t.data.bridgeName)||0;e.set(t.data.bridgeName,s+1)}}),e}};"undefined"!=typeof window&&(window.queueInfo=()=>rt.getDebugInfo(),window.clearStuckTasks=()=>rt.clearAllStuckTasks());class lt{static instance;monitoredTasks=new Map;intervalId=null;CHECK_INTERVAL_MS=5e3;STALE_TASK_THRESHOLD_MS=864e5;STALE_PROCESSING_MINUTES=5;MAX_RETRY_COUNT=3;STORAGE_KEY="queue_monitored_tasks";constructor(){this.loadFromStorage(),this.isExtensionContext()?setTimeout(()=>this.startMonitoring(),1e3):this.startMonitoring()}isExtensionContext(){try{return"undefined"!=typeof chrome&&void 0!==chrome.runtime&&void 0!==chrome.runtime.id}catch{return!1}}static getInstance(){return lt.instance||(lt.instance=new lt),lt.instance}loadFromStorage(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){JSON.parse(e).forEach(e=>{Date.now()-e.startTime<this.STALE_TASK_THRESHOLD_MS&&this.monitoredTasks.set(e.taskId,e)})}}catch(e){}}saveToStorage(){try{const e=Array.from(this.monitoredTasks.values());localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(e){}}startMonitoring(){this.intervalId&&clearInterval(this.intervalId),this.checkAllTasks(),this.intervalId=setInterval(()=>{this.checkAllTasks()},this.CHECK_INTERVAL_MS)}stopMonitoring(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}addTask(e,t,s,a,i,n,r,l){if(["COMPLETED","CANCELLED","FAILED"].includes(a))return;if("PENDING"===a&&i&&i>=this.MAX_RETRY_COUNT&&n)return;const u={taskId:e,teamName:t,machineName:s,bridgeName:r,priority:l,lastStatus:a,startTime:Date.now(),checkInterval:this.CHECK_INTERVAL_MS,lastCheckTime:Date.now()};this.monitoredTasks.set(e,u),this.saveToStorage(),setTimeout(()=>{this.checkTask(u)},1e3)}removeTask(e){this.monitoredTasks.delete(e),this.saveToStorage()}isTaskMonitored(e){return this.monitoredTasks.has(e)}async checkAllTasks(){const e=Date.now(),t=Array.from(this.monitoredTasks.values()).filter(t=>e-t.lastCheckTime>=t.checkInterval);for(const s of t)await this.checkTask(s)}async checkTask(e){try{let s;if(e.lastCheckTime=Date.now(),this.isExtensionContext())try{s=await Promise.race([u.get("/GetQueueItemTrace",{taskId:e.taskId}),new Promise((e,t)=>setTimeout(()=>t(new Error("Chrome extension timeout")),8e3))])}catch(t){if("Chrome extension timeout"===t.message)return;throw t}else s=await u.get("/GetQueueItemTrace",{taskId:e.taskId});const a=this.extractQueueDetails(s);if(!a)return;const i=a.status||a.Status;if(a.permanentlyFailed){rt.updateTaskStatus(e.taskId,"failed");const t=this.getLastFailureReason(a);return t?o("error","queue:monitoring.permanentlyFailedWithReason",{taskId:e.taskId,reason:t,teamName:e.teamName,machineName:e.machineName}):o("error","queue:monitoring.permanentlyFailed",{taskId:e.taskId,attempts:this.MAX_RETRY_COUNT,teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId)}if(i!==e.lastStatus){const t=e.lastStatus;if(e.lastStatus=i,"COMPLETED"===i)return rt.updateTaskStatus(e.taskId,"completed"),o("success","queue:monitoring.completed",{taskId:e.taskId,teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId);if("CANCELLED"===i)return rt.updateTaskStatus(e.taskId,"cancelled"),o("warning","queue:monitoring.cancelled",{taskId:e.taskId,teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId);if("CANCELLING"===i&&"CANCELLING"!==t)o("info","queue:monitoring.cancelling",{taskId:e.taskId,teamName:e.teamName,machineName:e.machineName}),this.monitoredTasks.set(e.taskId,e),this.saveToStorage();else if("FAILED"===i){const t=this.getRetryCount(a),s=this.getLastFailureReason(a);if(this.isPermanentFailure(s))return rt.updateTaskStatus(e.taskId,"failed"),o("error","queue:monitoring.permanentlyFailedWithReason",{taskId:e.taskId,reason:s||"",teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId);if(t>=this.MAX_RETRY_COUNT)return rt.updateTaskStatus(e.taskId,"failed"),o("error","queue:monitoring.permanentlyFailed",{taskId:e.taskId,attempts:this.MAX_RETRY_COUNT,teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId);o("warning","queue:monitoring.failedWaitingRetry",{taskId:e.taskId,attempt:t,maxAttempts:this.MAX_RETRY_COUNT,teamName:e.teamName,machineName:e.machineName}),this.monitoredTasks.set(e.taskId,e),this.saveToStorage()}else if("PROCESSING"===i&&"PROCESSING"!==t)o("info","queue:monitoring.startedProcessing",{taskId:e.taskId,teamName:e.teamName,machineName:e.machineName}),this.monitoredTasks.set(e.taskId,e),this.saveToStorage();else if("ASSIGNED"===i&&"PENDING"===t)o("info","queue:monitoring.assigned",{taskId:e.taskId,teamName:e.teamName,machineName:e.machineName}),this.monitoredTasks.set(e.taskId,e),this.saveToStorage();else if("PENDING"===i&&"PENDING"!==t&&this.getRetryCount(a)>0){const t=this.getRetryCount(a),s=this.getLastFailureReason(a);if(this.isPermanentFailure(s))return o("error","queue:monitoring.permanentlyFailedWithReason",{taskId:e.taskId,reason:s||"",teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId);if(t>=this.MAX_RETRY_COUNT&&s)return o("error","queue:monitoring.permanentlyFailed",{taskId:e.taskId,attempts:this.MAX_RETRY_COUNT,teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId);o("info","queue:monitoring.queuedForRetry",{taskId:e.taskId,attempt:t,maxAttempts:this.MAX_RETRY_COUNT,teamName:e.teamName,machineName:e.machineName}),this.monitoredTasks.set(e.taskId,e),this.saveToStorage()}else if("PENDING"===i){const t=this.getRetryCount(a),s=this.getLastFailureReason(a);if(this.isPermanentFailure(s))return o("error","queue:monitoring.permanentlyFailedWithReason",{taskId:e.taskId,reason:s||"",teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId);if(t>=this.MAX_RETRY_COUNT&&s)return o("error","queue:monitoring.permanentlyFailed",{taskId:e.taskId,attempts:this.MAX_RETRY_COUNT,teamName:e.teamName,machineName:e.machineName}),void this.removeTask(e.taskId)}}"PROCESSING"===i&&a.minutesSinceAssigned&&a.minutesSinceAssigned>this.STALE_PROCESSING_MINUTES&&(o("error","queue:monitoring.staleTask",{taskId:e.taskId,minutes:a.minutesSinceAssigned}),e.checkInterval=2*this.CHECK_INTERVAL_MS,this.monitoredTasks.set(e.taskId,e),this.saveToStorage())}catch(s){404===s.response?.status&&(o("error","queue:monitoring.taskNotFound",{taskId:e.taskId}),this.removeTask(e.taskId))}}getMonitoredTasks(){return Array.from(this.monitoredTasks.values())}extractQueueDetails(e){let t=null;return e.resultSets?.forEach(e=>{e.data&&e.data.length>0&&1===e.resultSetIndex&&(t=e.data[0])}),t}getRetryCount(e){return e.retryCount||e.RetryCount||0}getLastFailureReason(e){return e.lastFailureReason||e.LastFailureReason}isPermanentFailure(e){if(!e)return!1;return["Bridge reported failure","Task permanently failed","Fatal error"].some(t=>e.includes(t))}clearOldTasks(){const e=Date.now(),t=[];this.monitoredTasks.forEach((s,a)=>{e-s.startTime>this.STALE_TASK_THRESHOLD_MS&&t.push(a)}),t.forEach(e=>this.removeTask(e))}}const ut=lt.getInstance();"undefined"!=typeof window&&(window.queueMonitoringDebug={getTasks:()=>Array.from(ut.monitoredTasks.entries()),checkTask:e=>{const t=ut.monitoredTasks.get(e);t&&ut.checkTask(t)}}),F.extend(D);const{Text:ot,Title:ct}=Y,{Panel:dt}=W,{Step:ht}=$,mt=(e,...t)=>{if(!e)return null;for(const s of t)if(void 0!==e[s]&&null!==e[s])return e[s];return null},ft=e=>{if(e<60)return`${e} seconds`;const t=Math.floor(e/60);return`${t} minute${1!==t?"s":""}`},pt=(e,t,s)=>{if(!e||0===e.length)return null;let a=e.find(e=>mt(e,"action","Action")===t);if(!a&&s&&(a=e.find(e=>mt(e,"action","Action")===s)),a){const e=mt(a,"timestamp","Timestamp");return e?ue(e,"time"):null}return null},gt=({content:e,theme:t,consoleOutputRef:s,isEmpty:a})=>a||!e?S.jsx(ne,{description:"No console output available"}):S.jsx("div",{ref:s,"data-testid":"queue-trace-console-output",style:{backgroundColor:"dark"===t?"#1f1f1f":"#f5f5f5",border:"1px solid "+("dark"===t?"#303030":"#d9d9d9"),borderRadius:"4px",padding:"12px",fontFamily:"monospace",fontSize:"12px",lineHeight:"1.5",whiteSpace:"pre-wrap",wordBreak:"break-word",height:"400px",overflowY:"scroll"},children:e}),xt=({taskId:e,visible:t,onClose:a,onTaskStatusChange:i})=>{const{t:n}=oe(["queue","common"]),r=E(e=>e.ui.uiMode),u=c(),[o,D]=s.useState(null),[Y,ce]=s.useState(!1),[de,he]=s.useState(["overview"]),[me,fe]=s.useState(!0),[pe,ge]=s.useState(""),[xe,ye]=s.useState(""),{data:je,isLoading:ke,refetch:Te}=N(e,t),{mutate:De,isPending:Ee}=R(),{mutate:Se,isPending:ve}=b(),{theme:Ce}=d(),qe=s.useRef(null);s.useEffect(()=>{je&&t&&D(F())},[je,t]),s.useEffect(()=>{qe.current&&pe&&(qe.current.scrollTop=qe.current.scrollHeight)},[pe]),s.useEffect(()=>{if(je?.responseVaultContent?.hasContent&&je.responseVaultContent.vaultContent)try{const t="string"==typeof je.responseVaultContent.vaultContent?JSON.parse(je.responseVaultContent.vaultContent):je.responseVaultContent.vaultContent||{};if("completed"===t.status){let s="";if(t.result&&"string"==typeof t.result)try{const e=JSON.parse(t.result);s=e.command_output||"",!s&&e.message&&(s=`[${e.status}] ${e.message}`,void 0!==e.exit_code&&(s+=` (exit code: ${e.exit_code})`))}catch(e){s=t.result}ge(s),ye("completed")}else if("in_progress"===t.status&&t.message){const e=t.message;e&&"completed"!==xe&&(ge(t=>{if(e.startsWith(t)){return t+e.substring(t.length)}return e}),ye("in_progress"))}else if(!pe){let s="";if(t.result&&"string"==typeof t.result)try{const e=JSON.parse(t.result);s=e.command_output||"",!s&&e.message&&(s=`[${e.status}] ${e.message}`,void 0!==e.exit_code&&(s+=` (exit code: ${e.exit_code})`))}catch(e){s=t.result}else if(t.result&&"object"==typeof t.result){const e=t.result;s=e.command_output||"",!s&&e.message&&(s=`[${e.status}] ${e.message}`,void 0!==e.exit_code&&(s+=` (exit code: ${e.exit_code})`))}s&&ge(s)}}catch(t){}},[je?.responseVaultContent,xe,pe]),s.useEffect(()=>{t&&e&&(D(null),ce(ut.isTaskMonitored(e)),he(["overview"]),fe(!0),ge(""),ye(""))},[e,t,r]),s.useEffect(()=>{if(je?.queueDetails&&e&&i){const t=mt(je.queueDetails,"status","Status");"FAILED"!==t&&"COMPLETED"!==t&&"CANCELLED"!==t||i(t,e)}},[je?.queueDetails,e,i]);const Ne=()=>{e&&Se(e,{onSuccess:()=>{Te()}})},Re=()=>{if(e&&Y&&je?.queueDetails){const t=mt(je.queueDetails,"status","Status"),s=mt(je.queueDetails,"retryCount","RetryCount")||0,a=mt(je.queueDetails,"permanentlyFailed","PermanentlyFailed"),i=mt(je.queueDetails,"lastFailureReason","LastFailureReason");"COMPLETED"===t||"CANCELLED"===t||"FAILED"===t&&(a||s>=2)||"PENDING"===t&&s>=2&&i||l("info",`Task ${e} will continue to be monitored in the background`)}a()},be=()=>{if(!je?.queueDetails)return{status:"unknown",color:"default",icon:null};const e=mt(je.queueDetails,"status","Status"),t=mt(je.queueDetails,"retryCount","RetryCount")||0,s=mt(je.queueDetails,"lastFailureReason","LastFailureReason");if("PENDING"===e&&t>0&&s)return t>=2?{status:"Failed (Max Retries)",color:"error",icon:S.jsx(w,{})}:{status:"Retrying",color:"warning",icon:S.jsx(Ke,{spin:!0})};switch(e){case"COMPLETED":return{status:"Completed",color:"success",icon:S.jsx(g,{})};case"FAILED":return{status:"Failed",color:"error",icon:S.jsx(w,{})};case"CANCELLED":return{status:"Cancelled",color:"error",icon:S.jsx(w,{})};case"CANCELLING":return{status:"Cancelling",color:"warning",icon:S.jsx(C,{spin:!0})};case"PROCESSING":return{status:"Processing",color:"processing",icon:S.jsx(C,{spin:!0})};case"ASSIGNED":return{status:"Assigned",color:"blue",icon:S.jsx(m,{})};default:return{status:e||"Pending",color:"default",icon:S.jsx(m,{})}}},Pe=()=>{if(!je?.queueDetails)return"none";const e=mt(je.queueDetails,"lastAssigned","LastAssigned")||mt(je.queueDetails,"assignedTime","AssignedTime"),t=mt(je.queueDetails,"lastRetryAt","LastRetryAt"),s=mt(je.queueDetails,"lastResponseAt","LastResponseAt"),a=mt(je.queueDetails,"status","Status");if(!e||"COMPLETED"===a||"CANCELLED"===a||"CANCELLING"===a||"FAILED"===a||"PENDING"===a)return"none";const i=[e,t,s].filter(Boolean);if(0===i.length)return"none";const n=i.reduce((e,t)=>F(t).isAfter(F(e))?t:e),r=F().diff(F(n),"second");return r>=120?"critical":r>=90?"stale":r>=60?"early":"none"},_e=()=>{const e=Pe();return"stale"===e||"critical"===e},Le=e=>{if(!e)return{color:"default",icon:null,label:"Normal"};switch(e){case 1:return{color:"red",icon:S.jsx(T,{}),label:"Highest"};case 2:return{color:"orange",icon:S.jsx(A,{}),label:"High"};case 3:default:return{color:"default",icon:null,label:"Normal"};case 4:return{color:"blue",icon:null,label:"Low"};case 5:return{color:"cyan",icon:null,label:"Lowest"}}},Ae=()=>{if(!je?.queueDetails)return 0;switch(mt(je.queueDetails,"status","Status")){case"COMPLETED":return 3;case"FAILED":case"CANCELLED":return-1;case"CANCELLING":case"PROCESSING":return 2;case"ASSIGNED":return 1;default:return 0}};return S.jsx(G,{"data-testid":"queue-trace-modal",title:S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[S.jsxs(Q,{children:[S.jsx(j,{}),`Queue Item Trace - ${e||""}`]}),S.jsxs(Q,{direction:"vertical",size:8,align:"end",children:[S.jsx(le,{"data-testid":"queue-trace-mode-switch",value:me?"simple":"detailed",onChange:e=>fe("simple"===e),options:[{label:"Simple",value:"simple"},{label:"Detailed",value:"detailed"}],style:{minHeight:32}}),o&&S.jsxs(ot,{type:"secondary",style:{fontSize:"12px"},children:["Last fetched: ",o.format("HH:mm:ss")]})]})]}),open:t,onCancel:Re,style:h(1200),destroyOnHidden:!0,footer:[je?.queueDetails?S.jsx("div",{style:{float:"left",marginRight:"auto"},children:S.jsxs(Q,{align:"center",size:12,children:[S.jsx(ot,{type:"secondary",children:"Notifications:"}),S.jsx(le,{"data-testid":"queue-trace-monitoring-switch",value:Y?"on":"off",onChange:t=>(t=>{if(!e||!je?.queueDetails)return;const s=mt(je.queueDetails,"status","Status"),a=mt(je.queueDetails,"retryCount","RetryCount")||0,i=mt(je.queueDetails,"permanentlyFailed","PermanentlyFailed"),n=mt(je.queueDetails,"lastFailureReason","LastFailureReason");if("COMPLETED"===s||"CANCELLED"===s||"CANCELLING"===s||"FAILED"===s&&(i||a>=2)||"PENDING"===s&&a>=2&&n)return void l("warning","Cannot monitor completed, cancelled, or permanently failed tasks");if(void 0!==t?t:!Y){const t=je.queueDetails.teamName||"",i=je.queueDetails.machineName||"";ut.addTask(e,t,i,s,a,n),ce(!0),l("success","Background monitoring enabled. You will be notified when the task status changes.")}else ut.removeTask(e),ce(!1),l("info","Background monitoring disabled for this task")})("on"===t),disabled:!je?.queueDetails||"COMPLETED"===mt(je.queueDetails,"status","Status")||"CANCELLED"===mt(je.queueDetails,"status","Status")||"CANCELLING"===mt(je.queueDetails,"status","Status")||"FAILED"===mt(je.queueDetails,"status","Status")&&((mt(je.queueDetails,"retryCount","RetryCount")||0)>=2||mt(je.queueDetails,"permanentlyFailed","PermanentlyFailed"))||"PENDING"===mt(je.queueDetails,"status","Status")&&(mt(je.queueDetails,"retryCount","RetryCount")||0)>=2&&mt(je.queueDetails,"lastFailureReason","LastFailureReason"),options:[{label:S.jsx(ee,{title:"Get notified when task status changes",children:S.jsxs(Q,{size:4,children:[S.jsx(k,{style:{fontSize:14}}),S.jsx("span",{children:"Monitor"})]})}),value:"on"},{label:S.jsx(ee,{title:"No notifications for this task",children:S.jsxs(Q,{size:4,children:[S.jsx("span",{style:{opacity:.5},children:"🔕"}),S.jsx("span",{children:"Off"})]})}),value:"off"}],style:{minHeight:32}})]})},"monitor-switch"):null,je?.queueDetails&&je.queueDetails.canBeCancelled&&("PENDING"===mt(je.queueDetails,"status","Status")||"ASSIGNED"===mt(je.queueDetails,"status","Status")||"PROCESSING"===mt(je.queueDetails,"status","Status"))?S.jsx(H,{"data-testid":"queue-trace-cancel-button",danger:!0,type:"critical"===Pe()?"primary":"default",icon:S.jsx(w,{}),onClick:Ne,loading:ve,style:{...u.buttonPrimary,fontWeight:"critical"===Pe()?"bold":"normal",fontSize:"critical"===Pe()?"14px":"13px"},children:"critical"===Pe()?"Cancel Stuck Task":"stale"===Pe()?"Cancel Task":"Cancel"},"cancel"):null,je?.queueDetails&&"FAILED"===mt(je.queueDetails,"status","Status")&&(mt(je.queueDetails,"retryCount","RetryCount")||0)<2&&!mt(je.queueDetails,"permanentlyFailed","PermanentlyFailed")?S.jsx(H,{"data-testid":"queue-trace-retry-button",type:"primary",danger:!0,icon:S.jsx(Ke,{}),onClick:()=>{e&&De(e,{onSuccess:()=>{Te()}})},loading:Ee,style:u.buttonPrimary,children:"Retry Again"},"retry"):null,S.jsx(H,{"data-testid":"queue-trace-refresh-button",icon:S.jsx(q,{}),onClick:async()=>{await Te()},loading:ke,style:u.buttonSecondary,children:"Refresh"},"refresh"),S.jsx(H,{"data-testid":"queue-trace-close-button",onClick:Re,style:u.buttonSecondary,children:"Close"},"close")].filter(Boolean),children:ke?S.jsx("div",{className:"queue-trace-loading",children:S.jsx(B,{size:"large"})}):je?S.jsxs("div",{children:["early"===Pe()&&S.jsx(U,{"data-testid":"queue-trace-alert-early",message:"Task May Be Inactive",description:"Task hasn't provided updates for over 1 minute. This may be normal for long-running operations.",type:"info",showIcon:!0,icon:S.jsx(m,{}),style:{marginBottom:16}}),"stale"===Pe()&&S.jsx(U,{"data-testid":"queue-trace-alert-stale",message:"Task May Be Stale",description:"Task appears inactive for over 1.5 minutes. Consider canceling if no progress is expected.",type:"warning",showIcon:!0,icon:S.jsx(f,{}),style:{marginBottom:16},action:!je?.queueDetails?.canBeCancelled||"PENDING"!==mt(je.queueDetails,"status","Status")&&"ASSIGNED"!==mt(je.queueDetails,"status","Status")&&"PROCESSING"!==mt(je.queueDetails,"status","Status")?null:S.jsx(H,{danger:!0,size:"small",icon:S.jsx(w,{}),onClick:Ne,loading:ve,children:"Cancel Task"})}),"critical"===Pe()&&S.jsx(U,{"data-testid":"queue-trace-alert-critical",message:"Task Likely Stuck - Cancellation Recommended",description:"Task has been inactive for over 2 minutes. The queue processor will automatically timeout this task at 3 minutes if no activity is detected.",type:"error",showIcon:!0,icon:S.jsx(p,{}),style:{marginBottom:16},action:!je?.queueDetails?.canBeCancelled||"PENDING"!==mt(je.queueDetails,"status","Status")&&"ASSIGNED"!==mt(je.queueDetails,"status","Status")&&"PROCESSING"!==mt(je.queueDetails,"status","Status")?null:S.jsx(H,{danger:!0,type:"primary",icon:S.jsx(w,{}),onClick:Ne,loading:ve,style:{fontWeight:"bold"},children:"Cancel Stuck Task"})}),(()=>{if(!je?.queueDetails)return!1;const e=mt(je.queueDetails,"status","Status"),t=mt(je.queueDetails,"healthStatus","HealthStatus"),s=mt(je.queueDetails,"createdTime","CreatedTime");if("STALE_PENDING"===t)return!0;if("PENDING"!==e||!s)return!1;return F().diff(F(s),"hour")>=6})()&&S.jsx(U,{"data-testid":"queue-trace-alert-old-pending",message:"Old Pending Task",description:"This task has been pending for over 6 hours. It may expire soon if not processed.",type:"warning",showIcon:!0,icon:S.jsx(f,{}),style:{marginBottom:16}}),je.queueDetails&&"CANCELLING"===mt(je.queueDetails,"status","Status")&&S.jsx(U,{"data-testid":"queue-trace-alert-cancelling",message:"Task Being Cancelled",description:"The task is being cancelled. The bridge will stop execution gracefully.",type:"warning",showIcon:!0,icon:S.jsx(C,{spin:!0}),style:{marginBottom:16}}),je.queueDetails&&("COMPLETED"===mt(je.queueDetails,"status","Status")||"CANCELLED"===mt(je.queueDetails,"status","Status")||"FAILED"===mt(je.queueDetails,"status","Status")&&(mt(je.queueDetails,"permanentlyFailed","PermanentlyFailed")||(mt(je.queueDetails,"retryCount","RetryCount")||0)>=2))&&S.jsx(U,{"data-testid":"queue-trace-alert-final-status",message:"COMPLETED"===mt(je.queueDetails,"status","Status")?n("queue:taskStatus.completedTitle"):"CANCELLED"===mt(je.queueDetails,"status","Status")?n("queue:taskStatus.cancelledTitle"):n("queue:taskStatus.failedTitle"),description:"COMPLETED"===mt(je.queueDetails,"status","Status")?`The task finished successfully after ${ft(je.queueDetails.totalDurationSeconds)}.`:"CANCELLED"===mt(je.queueDetails,"status","Status")?n("queue:taskStatus.cancelledDescription"):n("queue:taskStatus.failedDescription",{retries:mt(je.queueDetails,"retryCount","RetryCount")||0}),type:"COMPLETED"===mt(je.queueDetails,"status","Status")?"success":"error",showIcon:!0,icon:"COMPLETED"===mt(je.queueDetails,"status","Status")?S.jsx(g,{}):S.jsx(w,{}),style:{marginBottom:16}}),je.queueDetails&&mt(je.queueDetails,"lastFailureReason","LastFailureReason")&&"CANCELLING"!==mt(je.queueDetails,"status","Status")&&S.jsx(U,{"data-testid":"queue-trace-alert-failure",message:"PENDING"===mt(je.queueDetails,"status","Status")&&mt(je.queueDetails,"retryCount","RetryCount")>0?mt(je.queueDetails,"retryCount","RetryCount")>=2?"Task Failed - Max Retries Reached":"Task Failed - Retrying":"Task Failed",description:mt(je.queueDetails,"lastFailureReason","LastFailureReason"),type:"PENDING"===mt(je.queueDetails,"status","Status")&&mt(je.queueDetails,"retryCount","RetryCount")>0?mt(je.queueDetails,"retryCount","RetryCount")>=2?"error":"warning":"error",showIcon:!0,icon:"PENDING"===mt(je.queueDetails,"status","Status")&&mt(je.queueDetails,"retryCount","RetryCount")>0?mt(je.queueDetails,"retryCount","RetryCount")>=2?S.jsx(w,{}):S.jsx(Ke,{}):void 0,style:{marginBottom:16}}),me&&je.queueDetails&&S.jsx(z,{"data-testid":"queue-trace-simple-overview",style:{...u.card,marginBottom:x("MD"),background:"dark"===Ce?"#1f1f1f":"#f0f2f5",border:"1px solid "+("dark"===Ce?"#303030":"#e8e8e8")},children:S.jsxs(Q,{direction:"vertical",size:"large",style:{width:"100%"},children:[S.jsx("div",{style:{textAlign:"center"},children:S.jsxs(Q,{size:"large",children:[S.jsx("span",{className:"queue-trace-status-icon "+("Processing"===be().status?"processing":""),children:be().icon}),S.jsxs(ct,{level:3,style:{margin:0},children:["Task ",be().status]})]})}),S.jsx(V,{"data-testid":"queue-trace-progress",className:"queue-trace-progress",percent:(()=>{if(!je?.queueDetails)return 0;switch(mt(je.queueDetails,"status","Status")){case"COMPLETED":case"FAILED":case"CANCELLED":return 100;case"PROCESSING":return 60;case"ASSIGNED":return 30;default:return 10}})(),status:"Failed"===be().status||"Cancelled"===be().status?"exception":"Completed"===be().status?"success":"active",strokeColor:{"0%":"#108ee9","100%":"Failed"===be().status||"Cancelled"===be().status?"#ff4d4f":"#87d068"}}),S.jsxs($,{"data-testid":"queue-trace-steps",className:"queue-trace-steps",current:Ae(),status:-1===Ae()?"error":void 0,size:"small",children:[S.jsx(ht,{title:"Created",description:je.queueDetails.createdTime?ue(je.queueDetails.createdTime,"time"):""}),S.jsx(ht,{title:"Assigned",description:je.queueDetails.assignedTime?ue(je.queueDetails.assignedTime,"time"):"Waiting"}),S.jsx(ht,{title:"Processing",description:(()=>{const e=Ae(),t=mt(je.queueDetails,"status","Status"),s=pt(je.traceLogs,"QUEUE_ITEM_PROCESSING","QUEUE_ITEM_RESPONSE_UPDATED");return"PROCESSING"===t?s||"In Progress":"CANCELLING"===t?"Cancelling...":e>=2?s||"Processed":""})()}),S.jsx(ht,{title:"Completed",description:"COMPLETED"===mt(je.queueDetails,"status","Status")?"Done"+(pt(je.traceLogs,"QUEUE_ITEM_COMPLETED")?" - "+pt(je.traceLogs,"QUEUE_ITEM_COMPLETED"):""):"FAILED"===mt(je.queueDetails,"status","Status")?"Failed"+(pt(je.traceLogs,"QUEUE_ITEM_FAILED")?" - "+pt(je.traceLogs,"QUEUE_ITEM_FAILED"):""):"CANCELLED"===mt(je.queueDetails,"status","Status")?"Cancelled"+(pt(je.traceLogs,"QUEUE_ITEM_CANCELLED")?" - "+pt(je.traceLogs,"QUEUE_ITEM_CANCELLED"):""):"CANCELLING"===mt(je.queueDetails,"status","Status")?"Cancelling":""})]}),S.jsxs(K,{gutter:[x("MD"),x("MD")],style:{textAlign:"center"},children:[S.jsx(X,{span:8,children:S.jsxs("div",{"data-testid":"queue-trace-info-duration",className:"queue-trace-key-info",style:{padding:x("SM"),borderRadius:y.BORDER_RADIUS.LG,background:"dark"===Ce?"#262626":"#fafafa"},children:[S.jsx(ot,{type:"secondary",children:"Duration"}),S.jsx("div",{children:S.jsx(ot,{strong:!0,style:{fontSize:y.FONT_SIZE.LG},children:(Me=je.queueDetails.totalDurationSeconds,Me<60?`${Me}s`:`${Math.floor(Me/60)}m`)})})]})}),S.jsx(X,{span:8,children:S.jsxs("div",{"data-testid":"queue-trace-info-machine",className:"queue-trace-key-info",style:{padding:x("SM"),borderRadius:y.BORDER_RADIUS.LG,background:"dark"===Ce?"#262626":"#fafafa"},children:[S.jsx(ot,{type:"secondary",children:"Machine"}),S.jsx("div",{children:S.jsx(ot,{strong:!0,children:je.queueDetails.machineName})})]})}),S.jsx(X,{span:8,children:S.jsxs("div",{"data-testid":"queue-trace-info-priority",className:"queue-trace-key-info",style:{padding:x("SM"),borderRadius:y.BORDER_RADIUS.LG,background:"dark"===Ce?"#262626":"#fafafa"},children:[S.jsx(ot,{type:"secondary",children:"Priority"}),S.jsx("div",{children:S.jsxs(J,{color:Le(mt(je.queueDetails,"priority","Priority")).color,children:[Le(mt(je.queueDetails,"priority","Priority")).icon,Le(mt(je.queueDetails,"priority","Priority")).label]})})]})})]})]})}),me&&S.jsx(z,{"data-testid":"queue-trace-simple-console",title:S.jsxs(Q,{children:[S.jsx(P,{}),S.jsx(ot,{children:"Response (Console)"}),"PROCESSING"===je?.queueDetails?.status&&S.jsx(J,{icon:S.jsx(C,{spin:!0}),color:"processing",children:"Live Output"})]}),style:{...u.card,marginTop:x("MD")},children:S.jsx(gt,{content:pe.replace(/\\r\\n/g,"\n").replace(/\\n/g,"\n").replace(/\\r/g,"\r"),theme:Ce,consoleOutputRef:qe,isEmpty:!je?.responseVaultContent?.hasContent})}),!me&&S.jsx("div",{style:{marginTop:x("MD")},children:S.jsxs(W,{"data-testid":"queue-trace-collapse",className:"queue-trace-collapse",activeKey:de,onChange:he,expandIcon:({isActive:e})=>S.jsx(nt,{rotate:e?90:0}),children:[je.queueDetails&&S.jsx(dt,{"data-testid":"queue-trace-panel-overview",header:S.jsxs(Q,{children:[S.jsx(Ie,{}),S.jsx("span",{children:"Task Overview"}),S.jsx(J,{color:be().color,children:be().status}),_e()&&S.jsx(J,{color:"warning",icon:S.jsx(f,{}),children:"Stale"})]}),extra:je.queueDetails.canBeCancelled&&"COMPLETED"!==mt(je.queueDetails,"status","Status")&&"CANCELLED"!==mt(je.queueDetails,"status","Status")&&"CANCELLING"!==mt(je.queueDetails,"status","Status")&&"FAILED"!==mt(je.queueDetails,"status","Status")&&S.jsx(ee,{title:"This task can be cancelled",children:S.jsx(se,{status:"processing",text:"Cancellable"})}),children:S.jsxs(K,{gutter:[24,16],children:[S.jsx(X,{xs:24,lg:12,children:S.jsxs(Q,{direction:"vertical",size:"middle",style:{width:"100%"},children:[S.jsx(z,{size:"small",title:"Task Information","data-testid":"queue-trace-task-info",children:S.jsxs(Z,{column:1,size:"small",children:[S.jsx(Z.Item,{label:"Task ID",children:S.jsx(ot,{code:!0,children:mt(je.queueDetails,"taskId","TaskId")})}),S.jsx(Z.Item,{label:"Created By",children:S.jsxs(Q,{children:[S.jsx(I,{}),S.jsx(ot,{children:mt(je.queueDetails,"createdBy","CreatedBy")||"System"})]})}),S.jsx(Z.Item,{label:"Retry Status",children:S.jsxs(Q,{children:[S.jsx(Ke,{}),S.jsxs(J,{color:0===mt(je.queueDetails,"retryCount","RetryCount")?"green":mt(je.queueDetails,"retryCount","RetryCount")<2?"orange":"red",children:[mt(je.queueDetails,"retryCount","RetryCount")||0," / 2 retries"]}),mt(je.queueDetails,"permanentlyFailed","PermanentlyFailed")&&S.jsx(J,{color:"error",children:"Permanently Failed"})]})}),S.jsx(Z.Item,{label:"Priority",children:S.jsxs(Q,{children:[Le(mt(je.queueDetails,"priority","Priority")).icon,S.jsx(J,{color:Le(mt(je.queueDetails,"priority","Priority")).color,children:Le(mt(je.queueDetails,"priority","Priority")).label}),(1===mt(je.queueDetails,"priority","Priority")||2===mt(je.queueDetails,"priority","Priority"))&&je.planInfo&&("Premium"===je.planInfo.planName||"Elite"===je.planInfo.planName)&&S.jsx(ee,{title:"Using high priority slot",children:S.jsx(M,{style:{color:"#faad14"}})})]})})]})}),S.jsx(z,{size:"small",title:"Processing Information","data-testid":"queue-trace-processing-info",children:S.jsxs(Z,{column:1,size:"small",children:[S.jsx(Z.Item,{label:"Machine",children:S.jsxs(Q,{children:[S.jsx(v,{}),S.jsx(ot,{children:je.queueDetails.machineName})]})}),S.jsx(Z.Item,{label:"Team",children:S.jsx(ot,{children:je.queueDetails.teamName})}),S.jsx(Z.Item,{label:"Bridge",children:S.jsx(ot,{children:je.queueDetails.bridgeName})}),S.jsx(Z.Item,{label:"Region",children:S.jsx(ot,{children:je.queueDetails.regionName})})]})}),S.jsxs(K,{gutter:[16,16],children:[S.jsx(X,{span:8,children:S.jsx(te,{title:n("queue:statistics.totalDuration"),value:je.queueDetails.totalDurationSeconds<60?je.queueDetails.totalDurationSeconds:Math.floor(je.queueDetails.totalDurationSeconds/60),suffix:je.queueDetails.totalDurationSeconds<60?"sec":"min",prefix:S.jsx(m,{})})}),S.jsx(X,{span:8,children:S.jsx(te,{title:n("queue:statistics.processing"),value:je.queueDetails.processingDurationSeconds?je.queueDetails.processingDurationSeconds<60?je.queueDetails.processingDurationSeconds:Math.floor(je.queueDetails.processingDurationSeconds/60):0,suffix:je.queueDetails.processingDurationSeconds&&je.queueDetails.processingDurationSeconds<60?"sec":"min",prefix:S.jsx(C,{})})}),S.jsx(X,{span:8,children:S.jsx(te,{title:n("queue:statistics.timeSinceAssigned"),value:je.queueDetails.assignedTime?F().diff(F(je.queueDetails.assignedTime),"minute"):"N/A",suffix:je.queueDetails.assignedTime?"min":"",prefix:S.jsx(Fe,{}),valueStyle:{color:_e()?"#ff4d4f":void 0}})})]})]})}),S.jsx(X,{xs:24,lg:12,children:S.jsx(z,{"data-testid":"queue-trace-detailed-console",title:S.jsxs(Q,{children:[S.jsx(P,{}),S.jsx(ot,{children:"Response (Console)"}),"PROCESSING"===je.queueDetails?.status&&S.jsx(J,{icon:S.jsx(C,{spin:!0}),color:"processing",children:"Live Output"})]}),size:"small",style:{height:"100%"},children:S.jsx(gt,{content:pe.replace(/\\r\\n/g,"\n").replace(/\\n/g,"\n").replace(/\\r/g,"\r"),theme:Ce,consoleOutputRef:qe,isEmpty:!je.responseVaultContent?.hasContent})})})]})},"overview"),je.queueDetails&&S.jsx(dt,{"data-testid":"queue-trace-panel-details",header:S.jsxs(Q,{children:[S.jsx(O,{}),S.jsx("span",{children:"Queue Item Details"}),S.jsx(ot,{type:"secondary",style:{fontSize:"12px"},children:"(Result Set 1)"})]}),children:S.jsxs(Z,{column:2,size:"small",children:[S.jsx(Z.Item,{label:"Task ID",children:S.jsx(ot,{code:!0,children:mt(je.queueDetails,"taskId","TaskId")})}),S.jsx(Z.Item,{label:"Status",children:S.jsx(J,{color:"COMPLETED"===mt(je.queueDetails,"status","Status")?"success":"CANCELLED"===mt(je.queueDetails,"status","Status")?"error":"CANCELLING"===mt(je.queueDetails,"status","Status")?"warning":"FAILED"===mt(je.queueDetails,"status","Status")?"error":"PROCESSING"===mt(je.queueDetails,"status","Status")?"processing":"ASSIGNED"===mt(je.queueDetails,"status","Status")?"blue":"default",children:mt(je.queueDetails,"status","Status")})}),S.jsx(Z.Item,{label:"Priority",children:je.queueDetails.priorityLabel||"-"}),S.jsx(Z.Item,{label:"Machine",children:je.queueDetails.machineName}),S.jsx(Z.Item,{label:"Team",children:je.queueDetails.teamName}),S.jsx(Z.Item,{label:"Bridge",children:je.queueDetails.bridgeName}),S.jsx(Z.Item,{label:"Region",children:je.queueDetails.regionName}),S.jsx(Z.Item,{label:"Created",children:ue(je.queueDetails.createdTime,"datetime")}),je.queueDetails.assignedTime&&S.jsx(Z.Item,{label:"Assigned",children:ue(je.queueDetails.assignedTime,"datetime")}),je.queueDetails.lastRetryAt&&S.jsx(Z.Item,{label:"Last Retry",children:ue(je.queueDetails.lastRetryAt,"datetime")}),S.jsx(Z.Item,{label:"Total Duration",children:ft(je.queueDetails.totalDurationSeconds)}),je.queueDetails.processingDurationSeconds&&S.jsx(Z.Item,{label:"Processing Duration",children:ft(je.queueDetails.processingDurationSeconds)}),S.jsx(Z.Item,{label:"Created By",children:mt(je.queueDetails,"createdBy","CreatedBy")||"-"}),S.jsx(Z.Item,{label:"Retry Count",children:S.jsxs(J,{color:0===mt(je.queueDetails,"retryCount","RetryCount")?"green":mt(je.queueDetails,"retryCount","RetryCount")<3?"orange":"red",children:[mt(je.queueDetails,"retryCount","RetryCount")||0,"/2"]})}),mt(je.queueDetails,"lastFailureReason","LastFailureReason")&&S.jsx(Z.Item,{label:"Last Failure Reason",span:2,children:S.jsx(ot,{type:"warning",children:mt(je.queueDetails,"lastFailureReason","LastFailureReason")})})]})},"details"),je.traceLogs&&je.traceLogs.length>0&&S.jsx(dt,{"data-testid":"queue-trace-panel-timeline",header:S.jsxs(Q,{children:[S.jsx(j,{}),S.jsx("span",{children:"Processing Timeline"}),S.jsx(ot,{type:"secondary",style:{fontSize:"12px"},children:"(Result Set 4 - Audit Log)"})]}),children:S.jsx(ae,{mode:"left",className:"queue-trace-timeline","data-testid":"queue-trace-timeline",children:je.traceLogs.map((e,t)=>{const s=mt(e,"action","Action"),a=mt(e,"timestamp","Timestamp"),i=mt(e,"details","Details")||"",n=mt(e,"actionByUser","ActionByUser")||"";let r="gray";return"QUEUE_ITEM_CREATED"===s?r="green":"QUEUE_ITEM_ASSIGNED"===s?r="blue":"QUEUE_ITEM_PROCESSING"===s||"QUEUE_ITEM_RESPONSE_UPDATED"===s?r="orange":"QUEUE_ITEM_COMPLETED"===s?r="green":"QUEUE_ITEM_CANCELLED"===s?r="red":"QUEUE_ITEM_CANCELLING"===s?r="warning":"QUEUE_ITEM_FAILED"===s?r="red":"QUEUE_ITEM_RETRY"===s?r="orange":(s.includes("ERROR")||s.includes("FAILED"))&&(r="red"),S.jsx(ae.Item,{color:r,children:S.jsxs(Q,{direction:"vertical",size:0,children:[S.jsx(ot,{strong:!0,children:s.replace("QUEUE_ITEM_","").replace(/_/g," ")}),S.jsx(ot,{type:"secondary",children:ue(a,"datetime")}),i&&S.jsx(ot,{children:i}),n&&S.jsxs(ot,{type:"secondary",children:["By: ",n]})]})},t)})})},"timeline"),(je.vaultContent||je.responseVaultContent)&&S.jsx(dt,{"data-testid":"queue-trace-panel-vault",header:S.jsxs(Q,{children:[S.jsx(O,{}),S.jsx("span",{children:"Vault Content"}),S.jsx(ot,{type:"secondary",style:{fontSize:"12px"},children:"(Result Sets 2 & 3)"})]}),children:S.jsx(ie,{"data-testid":"queue-trace-vault-tabs",items:[{key:"request",label:S.jsxs(Q,{children:[S.jsx(O,{}),"Request Vault"]}),children:je.vaultContent&&je.vaultContent.hasContent?(()=>{try{const e="string"==typeof je.vaultContent.vaultContent?JSON.parse(je.vaultContent.vaultContent):je.vaultContent.vaultContent||{};return S.jsx(_,{value:JSON.stringify(e,null,2),readOnly:!0,height:"300px"})}catch(e){return S.jsx(ne,{description:"Invalid request vault content format"})}})():S.jsx(ne,{description:"No request vault content"})},...je.responseVaultContent&&je.responseVaultContent.hasContent?[{key:"response",label:S.jsxs(Q,{children:[S.jsx(O,{}),"Response Vault"]}),children:(()=>{try{const t="string"==typeof je.responseVaultContent.vaultContent?JSON.parse(je.responseVaultContent.vaultContent):je.responseVaultContent.vaultContent||{};if(t.result&&"string"==typeof t.result)try{const e=JSON.parse(t.result);if("success"===e.status&&e.kernel_compatibility){const t=e.kernel_compatibility,s=t.os_info||{},a=t.compatibility_status||"unknown",i={compatible:{type:"success",icon:S.jsx(g,{}),color:"#52c41a"},warning:{type:"warning",icon:S.jsx(f,{}),color:"#faad14"},incompatible:{type:"error",icon:S.jsx(p,{}),color:"#ff4d4f"},unknown:{type:"info",icon:S.jsx(L,{}),color:"#1890ff"}},n=i[a]||i.unknown;return S.jsxs(Q,{direction:"vertical",style:{width:"100%"},children:[S.jsx(z,{size:"small",title:"SSH Test Result",style:{marginBottom:16},children:S.jsxs(Z,{column:2,size:"small",children:[S.jsx(Z.Item,{label:"Status",children:S.jsx(J,{color:"success",children:e.status})}),S.jsx(Z.Item,{label:"Machine",children:e.machine||"N/A"}),S.jsx(Z.Item,{label:"IP Address",children:e.ip}),S.jsx(Z.Item,{label:"User",children:e.user}),S.jsx(Z.Item,{label:"Auth Method",children:S.jsx(J,{children:e.auth_method})}),S.jsx(Z.Item,{label:"SSH Key",children:e.ssh_key_configured?S.jsx(J,{color:"success",children:"Configured"}):S.jsx(J,{color:"warning",children:"Not Configured"})})]})}),S.jsx(z,{size:"small",title:"System Information",style:{marginBottom:16},children:S.jsxs(Z,{column:1,size:"small",children:[S.jsx(Z.Item,{label:"Operating System",children:s.pretty_name||"Unknown"}),S.jsx(Z.Item,{label:"Kernel Version",children:S.jsx(ot,{code:!0,children:t.kernel_version||"Unknown"})}),S.jsx(Z.Item,{label:"OS ID",children:s.id||"Unknown"}),S.jsx(Z.Item,{label:"Version",children:s.version_id||"Unknown"}),S.jsx(Z.Item,{label:"BTRFS Support",children:t.btrfs_available?S.jsx(J,{color:"success",children:"Available"}):S.jsx(J,{color:"warning",children:"Not Available"})}),S.jsx(Z.Item,{label:"Sudo Support",children:(()=>{const e=t.sudo_available||"unknown";return"available"===e?S.jsx(J,{color:"success",children:"Available"}):"password_required"===e?S.jsx(J,{color:"warning",children:"Password Required"}):"not_installed"===e?S.jsx(J,{color:"error",children:"Not Installed"}):S.jsx(J,{color:"default",children:"Unknown"})})()})]})}),S.jsx(U,{"data-testid":"queue-trace-ssh-compatibility-alert",type:n.type,icon:n.icon,message:S.jsxs(Q,{children:[S.jsx(ot,{strong:!0,children:"Compatibility Status:"}),S.jsx(ot,{style:{color:n.color,textTransform:"capitalize"},children:a})]}),description:S.jsxs(S.Fragment,{children:[t.compatibility_issues&&t.compatibility_issues.length>0&&S.jsxs("div",{style:{marginTop:8},children:[S.jsx(ot,{strong:!0,children:"Known Issues:"}),S.jsx("ul",{style:{marginTop:4,marginBottom:8},children:t.compatibility_issues.map((e,t)=>S.jsx("li",{children:e},t))})]}),t.recommendations&&t.recommendations.length>0&&S.jsxs("div",{children:[S.jsx(ot,{strong:!0,children:"Recommendations:"}),S.jsx("ul",{style:{marginTop:4,marginBottom:0},children:t.recommendations.map((e,t)=>S.jsx("li",{children:e},t))})]})]}),showIcon:!0}),S.jsx(W,{style:{marginTop:16},children:S.jsx(W.Panel,{header:"Raw Response Data",children:S.jsx(_,{value:JSON.stringify(e,null,2),readOnly:!0,height:"200px"})},"raw")})]})}}catch(e){}return S.jsx(_,{value:JSON.stringify(t,null,2),readOnly:!0,height:"300px"})}catch(t){return S.jsx(ne,{description:"Invalid response vault content format"})}})()}]:[]]})},"vault"),je.queuePosition&&je.queuePosition.length>0&&S.jsxs(dt,{"data-testid":"queue-trace-panel-related",header:S.jsxs(Q,{children:[S.jsx(v,{}),S.jsx("span",{children:"Related Queue Items"}),S.jsx(ot,{type:"secondary",style:{fontSize:"12px"},children:"(Result Set 5 - Nearby Tasks)"})]}),children:[S.jsxs(K,{gutter:[16,16],children:[S.jsx(X,{span:12,children:S.jsx(z,{size:"small",title:"Tasks Before This One",children:S.jsxs("div",{style:{maxHeight:200,overflow:"auto"},children:[je.queuePosition.filter(e=>"Before"===e.relativePosition).map((e,t)=>S.jsx("div",{style:{marginBottom:8},children:S.jsxs(Q,{children:[S.jsx(ot,{code:!0,style:{fontSize:"11px"},children:e.taskId}),S.jsx(J,{color:"PROCESSING"===e.status?"processing":"default",style:{fontSize:"11px"},children:e.status}),S.jsx(ot,{type:"secondary",style:{fontSize:"11px"},children:F(e.createdTime).fromNow()})]})},t)),0===je.queuePosition.filter(e=>"Before"===e.relativePosition).length&&S.jsx(ne,{description:"No tasks ahead",image:ne.PRESENTED_IMAGE_SIMPLE})]})})}),S.jsx(X,{span:12,children:S.jsx(z,{size:"small",title:"Tasks After This One",children:S.jsxs("div",{style:{maxHeight:200,overflow:"auto"},children:[je.queuePosition.filter(e=>"After"===e.relativePosition).map((e,t)=>S.jsx("div",{style:{marginBottom:8},children:S.jsxs(Q,{children:[S.jsx(ot,{code:!0,style:{fontSize:"11px"},children:e.taskId}),S.jsx(J,{color:"PROCESSING"===e.status?"processing":"default",style:{fontSize:"11px"},children:e.status}),S.jsx(ot,{type:"secondary",style:{fontSize:"11px"},children:F(e.createdTime).fromNow()})]})},t)),0===je.queuePosition.filter(e=>"After"===e.relativePosition).length&&S.jsx(ne,{description:"No tasks behind",image:ne.PRESENTED_IMAGE_SIMPLE})]})})})]}),S.jsx("div",{style:{marginTop:16,textAlign:"center"},children:S.jsxs(ot,{type:"secondary",children:["Total: ",je.queuePosition.filter(e=>"Before"===e.relativePosition).length," tasks ahead,",je.queuePosition.filter(e=>"After"===e.relativePosition).length," tasks behind"]})})]},"related"),je.machineStats&&S.jsxs(dt,{"data-testid":"queue-trace-panel-performance",header:S.jsxs(Q,{children:[S.jsx(Ie,{}),S.jsx("span",{children:"Performance Metrics"}),S.jsx(ot,{type:"secondary",style:{fontSize:"12px"},children:"(Result Set 6 - Machine Stats)"})]}),children:[S.jsxs(K,{gutter:16,children:[S.jsx(X,{span:8,children:S.jsxs(z,{children:[S.jsx(te,{title:"Current Queue Depth",value:je.machineStats.currentQueueDepth,prefix:S.jsx(Fe,{}),suffix:"tasks",valueStyle:{color:je.machineStats.currentQueueDepth>50?"#ff4d4f":je.machineStats.currentQueueDepth>20?"#faad14":"#52c41a"}}),S.jsx(V,{percent:Math.min(100,je.machineStats.currentQueueDepth/100*100),showInfo:!1,strokeColor:je.machineStats.currentQueueDepth>50?"#ff4d4f":je.machineStats.currentQueueDepth>20?"#faad14":"#52c41a"})]})}),S.jsx(X,{span:8,children:S.jsxs(z,{children:[S.jsx(te,{title:"Active Processing Count",value:je.machineStats.activeProcessingCount,prefix:S.jsx(C,{spin:!0}),suffix:"tasks"}),S.jsx(ot,{type:"secondary",children:"Currently being processed on this machine"})]})}),S.jsx(X,{span:8,children:S.jsxs(z,{children:[S.jsx(te,{title:"Processing Capacity",value:`${je.machineStats.activeProcessingCount}/${je.planInfo?.maxConcurrentTasks||"N/A"}`,prefix:S.jsx(Ie,{}),valueStyle:{color:je.machineStats.activeProcessingCount>=(je.planInfo?.maxConcurrentTasks||0)?"#ff4d4f":"#52c41a"}}),S.jsx(V,{percent:je.planInfo?Math.min(100,je.machineStats.activeProcessingCount/je.planInfo.maxConcurrentTasks*100):0,showInfo:!1,strokeColor:je.machineStats.activeProcessingCount>=(je.planInfo?.maxConcurrentTasks||0)?"#ff4d4f":"#52c41a"})]})})]}),S.jsx(re,{}),S.jsx(U,{"data-testid":"queue-trace-performance-alert",message:"Performance Analysis",description:S.jsxs(Q,{direction:"vertical",children:[je.machineStats.currentQueueDepth>50&&S.jsx(ot,{children:"⚠️ High queue depth detected. Tasks may experience delays."}),je.machineStats.activeProcessingCount>=(je.planInfo?.maxConcurrentTasks||0)&&S.jsx(ot,{children:"⚠️ Machine at full capacity. New tasks will wait in queue."}),0===je.machineStats.currentQueueDepth&&0===je.machineStats.activeProcessingCount&&S.jsx(ot,{children:"✅ Machine is idle and ready to process tasks immediately."})]}),type:je.machineStats.currentQueueDepth>50?"warning":"info"})]},"performance"),je.planInfo&&S.jsx(dt,{"data-testid":"queue-trace-panel-subscription",header:S.jsxs(Q,{children:[S.jsx(M,{}),S.jsx("span",{children:"Subscription Context"}),S.jsx(ot,{type:"secondary",style:{fontSize:"12px"},children:"(Result Set 7 - Plan Info)"})]}),children:S.jsxs(z,{children:[S.jsxs(K,{gutter:[16,16],children:[S.jsx(X,{span:8,children:S.jsx(z,{type:"inner",children:S.jsx(te,{title:"Current Plan",value:je.planInfo.planName,prefix:"Elite"===je.planInfo.planName?S.jsx(M,{style:{color:"#faad14"}}):"Premium"===je.planInfo.planName?S.jsx(A,{style:{color:"#1890ff"}}):null})})}),S.jsx(X,{span:8,children:S.jsx(z,{type:"inner",children:S.jsx(te,{title:"Subscription Status",value:je.planInfo.subscriptionStatus,valueStyle:{color:"Active"===je.planInfo.subscriptionStatus?"#52c41a":"#ff4d4f"}})})}),S.jsx(X,{span:8,children:S.jsx(z,{type:"inner",children:S.jsx(te,{title:"Max Concurrent Tasks",value:je.planInfo.maxConcurrentTasks,suffix:"tasks"})})})]}),("Premium"===je.planInfo.planName||"Elite"===je.planInfo.planName)&&S.jsxs(S.Fragment,{children:[S.jsx(re,{}),S.jsx(U,{"data-testid":"queue-trace-premium-alert",message:"Premium Features",description:S.jsxs(Q,{direction:"vertical",children:[S.jsx(ot,{children:"✓ High priority slots available (Priority 1-2)"}),S.jsx(ot,{children:"✓ Increased concurrent task limit"}),"Elite"===je.planInfo.planName&&S.jsx(ot,{children:"✓ Maximum performance and priority access"})]}),type:"success",icon:S.jsx(M,{})})]})]})},"subscription")]})})]}):S.jsx(ne,{description:"No trace data available"})});var Me};export{Ie as D,Ne as P,xt as Q,nt as R,rt as q};
