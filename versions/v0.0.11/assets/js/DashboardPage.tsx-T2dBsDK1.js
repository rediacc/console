import{j as e}from"./chunk-DXw4Pgvm.js";import{f as t,g as s,r as a,L as i}from"./chunk-DZuWtVpy.js";import{r,a as n,b as l,c as o,C as d,u as c,H as u,d as h,e as x,f as g,E as y,g as p,S as m,W as j,h as b,i as v,T as f,A as S,U as w,I as C}from"../index-BLWR8CE4.js";import{E as I}from"./chunk-DU6A9pGq.js";import{u as P,E as k}from"./chunk-DsUQgCvd.js";import{S as T,D as z}from"./chunk-htgSwY5-.js";import{T as M}from"./chunk-LrZrUcR8.js";import{C as A}from"./chunk-BPdS1dCm.js";import{C as L}from"./chunk-D2NJiGNk.js";import{C as R}from"./chunk-D1KMCQez.js";import{L as _,S as E}from"./chunk-oMDLWVn4.js";import{I as $}from"./chunk-BR9ruJv_.js";import{F as B}from"./chunk-3DtY5ZAx.js";import{D as q,C as N}from"./chunk-CUbjpE5R.js";import{C as D}from"./chunk-BE0B82hB.js";import{u as H}from"./chunk-CM3g5OHp.js";import{t as O,o as U,a as F,q as W,s as V,u as G,T as Q,P as Y,f as J,k as K,g as X,p as Z,i as ee,E as te,v as se,w as ae,h as ie}from"./chunk-CSjZqX98.js";import"./chunk-BNqsZZGB.js";import"./chunk-C0XEpv6B.js";var re,ne,le,oe={exports:{}},de={},ce={};function ue(){if(re)return ce;re=1,Object.defineProperty(ce,"__esModule",{value:!0});return ce.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M193 796c0 17.7 14.3 32 32 32h574c17.7 0 32-14.3 32-32V563c0-176.2-142.8-319-319-319S193 386.8 193 563v233zm72-233c0-136.4 110.6-247 247-247s247 110.6 247 247v193H404V585c0-5.5-4.5-10-10-10h-44c-5.5 0-10 4.5-10 10v171h-75V563zm-48.1-252.5l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3l-67.9-67.9a8.03 8.03 0 00-11.3 0l-39.6 39.6a8.03 8.03 0 000 11.3l67.9 67.9c3.1 3.1 8.1 3.1 11.3 0zm669.6-79.2l-39.6-39.6a8.03 8.03 0 00-11.3 0l-67.9 67.9a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l67.9-67.9c3.1-3.2 3.1-8.2 0-11.3zM832 892H192c-17.7 0-32 14.3-32 32v24c0 4.4 3.6 8 8 8h688c4.4 0 8-3.6 8-8v-24c0-17.7-14.3-32-32-32zM484 180h56c4.4 0 8-3.6 8-8V76c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v96c0 4.4 3.6 8 8 8z"}}]},name:"alert",theme:"outlined"},ce}function he(){if(ne)return de;ne=1;var e=r().default,s=n().default;Object.defineProperty(de,"__esModule",{value:!0}),de.default=void 0;var a=s(l()),i=e(t()),d=s(ue()),c=s(o()),u=function(e,t){return i.createElement(c.default,(0,a.default)({},e,{ref:t,icon:d.default}))},h=i.forwardRef(u);return de.default=h,de}function xe(){return le||(le=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s;const a=(s=he())&&s.__esModule?s:{default:s};t.default=a,e.exports=a}(oe,oe.exports)),oe.exports}const ge=s(xe());var ye,pe,me,je={exports:{}},be={},ve={};function fe(){if(ye)return ve;ye=1,Object.defineProperty(ve,"__esModule",{value:!0});return ve.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 328a60 60 0 10120 0 60 60 0 10-120 0zM852 64H172c-17.7 0-32 14.3-32 32v660c0 17.7 14.3 32 32 32h680c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-32 660H204V128h616v596zM604 328a60 60 0 10120 0 60 60 0 10-120 0zm250.2 556H169.8c-16.5 0-29.8 14.3-29.8 32v36c0 4.4 3.3 8 7.4 8h729.1c4.1 0 7.4-3.6 7.4-8v-36c.1-17.7-13.2-32-29.7-32zM664 508H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"robot",theme:"outlined"},ve}function Se(){if(pe)return be;pe=1;var e=r().default,s=n().default;Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var a=s(l()),i=e(t()),d=s(fe()),c=s(o()),u=function(e,t){return i.createElement(c.default,(0,a.default)({},e,{ref:t,icon:d.default}))},h=i.forwardRef(u);return be.default=h,be}function we(){return me||(me=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s;const a=(s=Se())&&s.__esModule?s:{default:s};t.default=a,e.exports=a}(je,je.exports)),je.exports}const Ce=s(we()),Ie=new Map,Pe=new Map,ke=(e,t)=>{const s={COMMUNITY:"community",ADVANCED:"advanced",PREMIUM:"premium",ELITE:"elite"}[t]||t.toLowerCase(),a=e.baseMonthlyPrices[s];if(!a)return null;if("string"==typeof a.price&&("free"===a.price.toLowerCase()||"gratis"===a.price.toLowerCase()||"0"===a.price))return 0;const i="string"==typeof a.price?parseFloat(a.price):a.price;return isNaN(i)?null:i},{Text:Te}=Q,ze=({stats:t})=>{const{t:s}=H(["common","distributedStorage"]),{token:a}=O.useToken(),i=c();if(!t)return null;const r=e=>{switch(e){case"available":return a.colorSuccess;case"cluster":return a.colorInfo;case"image":return a.colorWarning;case"clone":return"#fa8c16";default:return a.colorTextSecondary}},n=[{type:"available",label:s("distributedStorage:assignmentStatus.available"),count:t.truly_available_machines,percentage:Math.round(t.truly_available_machines/t.total_machines*100),icon:e.jsx(D,{})},{type:"cluster",label:s("distributedStorage:assignmentStatus.cluster"),count:t.cluster_assigned_machines,percentage:t.cluster_percentage,icon:e.jsx(q,{})},{type:"image",label:s("distributedStorage:assignmentStatus.image"),count:t.image_assigned_machines,percentage:t.image_percentage,icon:e.jsx(u,{})},{type:"clone",label:s("distributedStorage:assignmentStatus.clone"),count:t.clone_assigned_machines,percentage:t.clone_percentage,icon:e.jsx(N,{})}];return e.jsx(U,{"data-testid":"ds-widget-card",title:e.jsxs(F,{style:i.flexStart,children:[e.jsx(D,{style:i.icon.medium}),e.jsx("span",{style:i.heading4,children:s("distributedStorage:dashboard.title")})]}),extra:e.jsx(Te,{type:"secondary",style:i.caption,children:s("distributedStorage:dashboard.subtitle",{total:t.total_machines})}),style:{...i.card,border:"1px solid var(--color-border-secondary)"},children:e.jsxs(F,{direction:"vertical",size:"large",style:{width:"100%",...i.padding.md},children:[e.jsx(W,{gutter:[16,16],children:n.map(t=>e.jsx(V,{xs:12,sm:12,md:6,children:e.jsx(U,{"data-testid":`ds-widget-stat-${t.type}`,size:"small",style:{textAlign:"center",borderColor:r(t.type),borderRadius:"var(--border-radius-lg)",backgroundColor:"var(--color-bg-container)",boxShadow:"var(--shadow-sm)",...i.hoverEffect},children:e.jsxs(F,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx("div",{style:{fontSize:i.icon.xlarge.fontSize,color:r(t.type)},children:t.icon}),e.jsx(G,{"data-testid":`ds-widget-stat-value-${t.type}`,title:e.jsx("span",{style:i.label,children:t.label}),value:t.count,suffix:e.jsxs(Te,{type:"secondary",style:i.caption,children:["(",t.percentage,"%)"]}),valueStyle:{...i.heading3,color:r(t.type)}})]})})},t.type))}),e.jsxs(W,{gutter:[16,16],children:[e.jsx(V,{xs:24,md:12,children:e.jsx("div",{"data-testid":"ds-widget-cluster-summary",style:{...i.padding.md,backgroundColor:"var(--color-bg-container)",borderRadius:"var(--border-radius-lg)",border:"1px solid var(--color-border-secondary)",boxShadow:"var(--shadow-sm)"},children:e.jsxs(F,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsx(Te,{strong:!0,style:i.heading5,children:s("distributedStorage:dashboard.clusterSummary")}),e.jsxs(W,{gutter:16,children:[e.jsx(V,{span:12,children:e.jsx(G,{"data-testid":"ds-widget-stat-total-clusters",title:e.jsx("span",{style:i.label,children:s("distributedStorage:dashboard.totalClusters")}),value:t.total_clusters,valueStyle:i.heading4})}),e.jsx(V,{span:12,children:e.jsx(G,{"data-testid":"ds-widget-stat-avg-machines",title:e.jsx("span",{style:i.label,children:s("distributedStorage:dashboard.avgMachinesPerCluster")}),value:t.avg_machines_per_cluster,precision:1,valueStyle:i.heading4})})]})]})})}),e.jsx(V,{xs:24,md:12,children:e.jsx("div",{"data-testid":"ds-widget-machine-utilization",style:{...i.padding.md,backgroundColor:"var(--color-bg-container)",borderRadius:"var(--border-radius-lg)",border:"1px solid var(--color-border-secondary)",boxShadow:"var(--shadow-sm)"},children:e.jsxs(F,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx(Te,{strong:!0,style:i.heading5,children:s("distributedStorage:dashboard.machineUtilization")}),e.jsx(Y,{"data-testid":"ds-widget-progress-utilization",percent:Math.round((t.total_machines-t.truly_available_machines)/t.total_machines*100),strokeColor:{"0%":a.colorPrimary,"100%":a.colorSuccess},format:e=>`${e}% ${s("common:utilized")}`}),e.jsx(Te,{type:"secondary",style:i.caption,children:s("distributedStorage:dashboard.utilizationDetails",{used:t.total_machines-t.truly_available_machines,total:t.total_machines})})]})})})]}),t.team_breakdown&&t.team_breakdown.length>0&&e.jsxs("div",{"data-testid":"ds-widget-team-breakdown",children:[e.jsxs(F,{style:i.marginBottom.sm,children:[e.jsx(M,{style:i.icon.medium}),e.jsx(Te,{strong:!0,style:i.heading5,children:s("distributedStorage:dashboard.teamBreakdown")})]}),e.jsx(J,{"data-testid":"ds-widget-team-list",size:"small",dataSource:t.team_breakdown,renderItem:t=>e.jsx(J.Item,{"data-testid":`ds-widget-team-item-${t.TeamName.toLowerCase().replace(/\s+/g,"-")}`,style:{...i.padding.sm,backgroundColor:"var(--color-bg-container)",marginBottom:"8px",borderRadius:"var(--border-radius-md)",border:"1px solid var(--color-border-secondary)",boxShadow:"var(--shadow-sm)"},children:e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{...i.flexBetween,...i.marginBottom.xs},children:[e.jsx(Te,{strong:!0,style:i.label,children:t.TeamName}),e.jsxs(Te,{type:"secondary",style:i.caption,children:[t.TotalMachines," machines"]})]}),e.jsxs(F,{wrap:!0,children:[e.jsx(K,{title:s("distributedStorage:assignmentStatus.available"),children:e.jsxs(X,{"data-testid":`ds-widget-team-tag-available-${t.TeamName.toLowerCase().replace(/\s+/g,"-")}`,color:"success",children:[t.AvailableMachines," available"]})}),t.ClusterMachines>0&&e.jsx(K,{title:s("distributedStorage:assignmentStatus.cluster"),children:e.jsxs(X,{"data-testid":`ds-widget-team-tag-cluster-${t.TeamName.toLowerCase().replace(/\s+/g,"-")}`,color:"blue",children:[t.ClusterMachines," cluster"]})}),t.ImageMachines>0&&e.jsx(K,{title:s("distributedStorage:assignmentStatus.image"),children:e.jsxs(X,{"data-testid":`ds-widget-team-tag-image-${t.TeamName.toLowerCase().replace(/\s+/g,"-")}`,color:"purple",children:[t.ImageMachines," image"]})}),t.CloneMachines>0&&e.jsx(K,{title:s("distributedStorage:assignmentStatus.clone"),children:e.jsxs(X,{"data-testid":`ds-widget-team-tag-clone-${t.TeamName.toLowerCase().replace(/\s+/g,"-")}`,color:"orange",children:[t.CloneMachines," clone"]})})]})]})})})]})]})})},{Title:Me,Text:Ae,Paragraph:Le}=Q,Re={User:e.jsx(w,{}),Team:e.jsx(M,{}),Region:e.jsx(I,{}),Bridge:e.jsx(S,{}),Machine:e.jsx(z,{}),Repo:e.jsx($,{}),Storage:e.jsx(A,{})},_e=()=>{const{data:t,isLoading:s,error:r}=h(),{data:n,isLoading:l}=P(6),[o,c]=a.useState(null),[u,S]=a.useState(!0),[w,I]=a.useState(!1),{theme:A}=x(),{token:$}=O.useToken();if(a.useEffect(()=>{const e=()=>{const e=window.innerWidth<768;I(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>{(async()=>{S(!0);try{const e=await(async()=>{const e="pricing",t=Ie.get(e),s=Pe.get(e);if(t&&s&&Date.now()-s<36e5)return t;try{const t=await fetch(d.PRICING,{method:"GET",mode:"cors",credentials:"omit",cache:"default"});if(!t.ok)throw new Error(`Failed to fetch pricing: ${t.status}`);const s=await t.json();return Ie.set(e,s),Pe.set(e,Date.now()),s}catch(r){return t||null}})();c(e)}catch(e){c(null)}finally{S(!1)}})()},[]),s)return e.jsx("div",{style:{padding:24,textAlign:"center"},children:e.jsx(Z,{size:"large"})});if(r)return e.jsx("div",{style:{padding:24},children:e.jsx(ee,{message:"Error",description:"Failed to load dashboard data. Please try again later.",type:"error",showIcon:!0,icon:e.jsx(ge,{}),"data-testid":"dashboard-error-alert"})});if(!t)return e.jsx("div",{style:{padding:24},children:e.jsx(te,{description:"No dashboard data available"})});const q={Critical:"error",Warning:"warning",Good:"success"},N=90,D=75,H=t=>{const s=t.toLowerCase();return s.includes("create")?e.jsx(p,{style:{color:$.colorSuccess}}):s.includes("delete")?e.jsx(R,{style:{color:$.colorError}}):s.includes("update")||s.includes("modify")?e.jsx(k,{style:{color:$.colorWarning}}):s.includes("login")||s.includes("auth")?e.jsx(_,{style:{color:$.colorInfo}}):s.includes("export")||s.includes("import")?e.jsx(E,{style:{color:$.colorPrimary}}):e.jsx(C,{style:{color:$.colorTextSecondary}})},Q=6e4,re=60,ne=24,le=7,oe=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),a=Math.floor(s/Q);if(a<1)return"just now";if(a<re)return`${a} minute${a>1?"s":""} ago`;const i=Math.floor(a/re);if(i<ne)return`${i} hour${i>1?"s":""} ago`;const r=Math.floor(i/ne);return r<le?`${r} day${r>1?"s":""} ago`:t.toLocaleDateString()};return e.jsxs("div",{style:{padding:w?16:24},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(Me,{level:2,children:"Dashboard"}),e.jsxs(Ae,{type:"secondary",children:["Welcome to ",t.companyInfo.CompanyName]}),w&&e.jsx("div",{style:{marginTop:8},children:e.jsx(Ae,{type:"secondary",style:{fontSize:12},children:"Tap sections below to expand/collapse content"})})]}),e.jsxs(F,{direction:"vertical",size:"large",style:{width:"100%"},children:[1===t.activeSubscription?.IsExpiringSoon&&e.jsx(ee,{message:"Subscription Expiring Soon",description:`Your ${t.activeSubscription.PlanName} subscription expires in ${t.activeSubscription.DaysRemaining} days.${t.activeSubscription.AutoRenew?"":" Enable auto-renewal to avoid service interruption."}`,type:"warning",showIcon:!0,icon:e.jsx(g,{}),"data-testid":"dashboard-alert-subscription-expiring"}),t.accountHealth.ResourcesAtLimit>0&&e.jsx(ee,{message:"Resource Limits Reached",description:`${t.accountHealth.ResourcesAtLimit} resource type(s) have reached their limits. Consider upgrading your plan to continue scaling.`,type:"error",showIcon:!0,icon:e.jsx(y,{}),"data-testid":"dashboard-alert-resource-limits"}),e.jsxs(W,{gutter:[16,16],children:[e.jsx(V,{xs:24,lg:12,children:e.jsx(U,{"data-testid":"dashboard-account-health-card",title:e.jsxs(F,{children:[e.jsx(m,{}),e.jsx("span",{children:"Account Health"})]}),style:{height:"100%"},children:e.jsxs(F,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{children:"Overall Status"}),e.jsx(X,{color:(de=t.accountHealth.SubscriptionStatus,q[de]||"success"),children:t.accountHealth.SubscriptionStatus})]}),e.jsxs(F,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxs(F,{children:[t.accountHealth.ResourcesAtLimit>0?e.jsx(y,{style:{color:$.colorWarning}}):e.jsx(p,{style:{color:$.colorSuccess}}),e.jsxs(Ae,{children:[t.accountHealth.ResourcesAtLimit," resources at limit"]})]}),e.jsxs(F,{children:[e.jsx(g,{style:{color:$.colorTextSecondary}}),e.jsxs(Ae,{children:[t.accountHealth.ResourcesNearLimit," resources near limit"]})]})]}),e.jsx("div",{style:{paddingTop:12,borderTop:`1px solid ${$.colorBorder}`},children:e.jsx(Ae,{strong:!0,children:t.accountHealth.UpgradeRecommendation})})]})})}),e.jsx(V,{xs:24,lg:12,children:t.queueStats?e.jsx(U,{title:e.jsxs(F,{children:[e.jsx(Ce,{}),e.jsx("span",{children:"Queue Overview"})]}),extra:e.jsx(i,{to:"/queue",style:{color:$.colorPrimary},"data-testid":"dashboard-queue-manage-link",children:"Manage"}),style:{height:"100%"},"data-testid":"dashboard-card-queue-overview",children:e.jsxs(F,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxs(W,{gutter:[16,16],children:[e.jsx(V,{span:6,children:e.jsx(G,{title:"Pending",value:t.queueStats.PendingCount||0,valueStyle:{color:$.colorWarning},prefix:e.jsx(g,{}),"data-testid":"dashboard-stat-pending"})}),e.jsx(V,{span:6,children:e.jsx(G,{title:"Processing",value:t.queueStats.ActiveCount||0,valueStyle:{color:$.colorInfo},prefix:e.jsx(T,{spin:!0}),"data-testid":"dashboard-stat-processing"})}),e.jsx(V,{span:6,children:e.jsx(G,{title:"Completed",value:t.queueStats.CompletedCount||0,valueStyle:{color:$.colorSuccess},prefix:e.jsx(p,{}),"data-testid":"dashboard-stat-completed"})}),e.jsx(V,{span:6,children:e.jsx(G,{title:"Failed",value:t.queueStats.FailedCount||0,valueStyle:{color:$.colorError},prefix:e.jsx(y,{}),"data-testid":"dashboard-stat-failed"})})]}),(1===t.queueStats.HasStaleItems||1===t.queueStats.HasOldPendingItems)&&e.jsxs(F,{direction:"vertical",size:"small",style:{width:"100%"},children:[1===t.queueStats.HasStaleItems&&e.jsx(ee,{message:`${t.queueStats.StaleCount||0} stale items`,type:"warning",showIcon:!0,icon:e.jsx(j,{}),"data-testid":"dashboard-alert-stale-items"}),1===t.queueStats.HasOldPendingItems&&e.jsx(ee,{message:`Oldest: ${Math.floor((t.queueStats.OldestPendingAgeMinutes||0)/60)}h`,type:"info",showIcon:!0,icon:e.jsx(B,{}),"data-testid":"dashboard-alert-old-pending"})]})]})}):e.jsx(U,{title:e.jsxs(F,{children:[e.jsx(Ce,{}),e.jsx("span",{children:"Queue Overview"})]}),style:{height:"100%"},"data-testid":"dashboard-card-queue-overview-empty",children:e.jsx(te,{description:"No queue data available"})})})]}),e.jsx(U,{title:"Resource Usage",extra:e.jsx(Ae,{type:"secondary",children:"Monitor your resource consumption against plan limits"}),"data-testid":"dashboard-card-resource-usage",children:e.jsx(W,{gutter:[16,24],children:t.resources.map(t=>{return e.jsx(V,{xs:24,sm:12,md:8,children:e.jsx("div",{style:{padding:"16px",borderRadius:b("LG"),border:`1px solid ${$.colorBorderSecondary}`,backgroundColor:"dark"===A?$.colorBgContainer:$.colorBgLayout,height:"100%",transition:"all 0.2s ease"},children:e.jsxs(F,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(F,{size:"small",children:[Re[t.ResourceType],e.jsxs(Ae,{strong:!0,children:[t.ResourceType,"s"]})]}),e.jsxs(Ae,{type:"secondary",style:{fontWeight:500},children:[t.CurrentUsage," / ",0===t.ResourceLimit?"∞":t.ResourceLimit]})]}),e.jsx(Y,{percent:0===t.ResourceLimit?0:t.UsagePercentage,status:(s=t.UsagePercentage,s>=N?"exception":s>=D?"normal":"success"),strokeColor:1===t.IsLimitReached?"dark"===A?"#ff6b6b":$.colorError:"dark"===A?"#7d9b49":$.colorPrimary,"data-testid":`dashboard-progress-${t.ResourceType.toLowerCase()}`,style:{margin:"8px 0"}}),1===t.IsLimitReached&&e.jsx(Ae,{type:"danger",style:{fontSize:12,fontWeight:500},children:"Limit reached"})]})})},t.ResourceType);var s})})}),e.jsx(U,{title:e.jsxs(F,{children:[e.jsx(v,{}),e.jsx("span",{children:"Recent Activity"})]}),extra:e.jsx(i,{to:"/audit",style:{color:$.colorPrimary},"data-testid":"dashboard-activity-viewall-link",children:"View All"}),"data-testid":"dashboard-card-recent-activity",children:l?e.jsx("div",{style:{textAlign:"center",padding:"20px"},children:e.jsx(Z,{})}):n&&n.length>0?e.jsx(se,{items:n.filter(e=>{const t=e.action.toLowerCase(),s=t.includes("token")&&t.includes("validat"),a=t.includes("login")&&t.includes("success");return!s&&!a}).slice(0,5).map((t,s)=>({key:s,dot:H(t.action),children:e.jsxs(F,{direction:"vertical",size:4,style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(F,{size:8,children:[e.jsx(Ae,{strong:!0,style:{fontSize:14},children:t.action.replace(/_/g," ")}),e.jsx(X,{children:t.entity})]}),e.jsx(Ae,{type:"secondary",style:{fontSize:11,flexShrink:0,marginLeft:8},children:oe(t.timestamp)})]}),e.jsxs(Ae,{type:"secondary",style:{fontSize:12,lineHeight:1.4},children:[t.entityName," ",t.actionByUser&&`• ${t.actionByUser}`]}),t.details&&t.details.trim()&&e.jsx(Ae,{type:"secondary",style:{fontSize:11,opacity:.8},children:t.details.length>80?`${t.details.substring(0,80)}...`:t.details})]})}))}):e.jsx(te,{description:"No recent activity",image:te.PRESENTED_IMAGE_SIMPLE,style:{padding:"20px 0"}})}),t.queueStats&&(Array.isArray(t.queueStats.TeamIssues)&&t.queueStats.TeamIssues.length>0||Array.isArray(t.queueStats.MachineIssues)&&t.queueStats.MachineIssues.length>0)&&e.jsx(U,{title:e.jsxs(F,{children:[e.jsx(Ce,{}),e.jsx("span",{children:"Queue Details"})]}),"data-testid":"dashboard-card-queue-details",children:e.jsxs(W,{gutter:[16,16],children:[e.jsx(V,{xs:24,lg:8,children:e.jsxs("div",{style:{padding:"16px",backgroundColor:"dark"===A?$.colorBgContainer:$.colorBgLayout,borderRadius:b("LG"),border:`1px solid ${$.colorBorder}`,height:"100%"},children:[e.jsx(Ae,{strong:!0,style:{display:"block",marginBottom:12},children:"Today's Activity"}),e.jsxs(F,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{type:"secondary",children:"Created"}),e.jsx(Ae,{strong:!0,style:{fontSize:18},"data-testid":"dashboard-stat-created-today",children:t.queueStats.CreatedToday||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{type:"secondary",children:"Completed"}),e.jsx(Ae,{strong:!0,style:{fontSize:18,color:$.colorSuccess},"data-testid":"dashboard-stat-completed-today",children:t.queueStats.CompletedToday||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{type:"secondary",children:"Cancelled"}),e.jsx(Ae,{strong:!0,style:{fontSize:18,color:$.colorError},"data-testid":"dashboard-stat-cancelled-today",children:t.queueStats.CancelledToday||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{type:"secondary",children:"Failed"}),e.jsx(Ae,{strong:!0,style:{fontSize:18,color:$.colorError},"data-testid":"dashboard-stat-failed-today",children:t.queueStats.FailedToday||0})]})]})]})}),e.jsx(V,{xs:24,lg:16,children:e.jsxs(F,{direction:"vertical",size:"large",style:{width:"100%"},children:[Array.isArray(t.queueStats.TeamIssues)&&t.queueStats.TeamIssues.length>0&&e.jsxs("div",{children:[e.jsxs(Ae,{strong:!0,style:{display:"block",marginBottom:12},children:[e.jsx(M,{})," Team Queue Status"]}),e.jsx(J,{size:"small",dataSource:t.queueStats.TeamIssues,"data-testid":"dashboard-list-team-issues",renderItem:t=>e.jsx(J.Item,{style:{paddingLeft:0,paddingRight:0},children:e.jsx("div",{style:{width:"100%"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx(Ae,{strong:!0,children:t.TeamName}),e.jsxs(F,{size:"small",children:[(t.StaleItems||0)>0&&e.jsxs(X,{color:"warning",children:[e.jsx(j,{})," ",t.StaleItems," stale"]}),e.jsxs(X,{color:"blue",children:[t.PendingItems||0," pending"]}),e.jsxs(X,{color:"processing",children:[t.ActiveItems||0," active"]})]})]})})})})]}),Array.isArray(t.queueStats.MachineIssues)&&t.queueStats.MachineIssues.length>0&&e.jsxs("div",{children:[e.jsxs(Ae,{strong:!0,style:{display:"block",marginBottom:12},children:[e.jsx(z,{})," Machine Queue Status"]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsx(ae,{size:"small",dataSource:t.queueStats.MachineIssues,pagination:!1,"data-testid":"dashboard-table-machine-issues",columns:[{title:"Machine",dataIndex:"MachineName",key:"MachineName",ellipsis:!0},{title:"Team",dataIndex:"TeamName",key:"TeamName",ellipsis:!0},{title:"Status",key:"status",width:200,render:(t,s)=>e.jsxs(F,{size:"small",children:[(s.StaleItems||0)>0&&e.jsxs(X,{color:"warning",children:[s.StaleItems," stale"]}),e.jsxs(X,{color:"blue",children:[s.PendingItems||0," pending"]}),e.jsxs(X,{color:"processing",children:[s.ActiveItems||0," active"]})]})}]})})]}),1===t.featureAccess.HasAdvancedAnalytics&&null!==t.queueStats.HighestPriorityPending&&e.jsxs("div",{style:{padding:"16px",backgroundColor:"dark"===A?$.colorBgContainer:$.colorBgLayout,borderRadius:b("LG"),border:`1px solid ${$.colorBorder}`},children:[e.jsxs(Ae,{strong:!0,style:{display:"block",marginBottom:12},children:[e.jsx(f,{})," Priority Breakdown"]}),e.jsxs(F,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{children:"Highest Priority"}),e.jsx(ie,{count:t.queueStats.HighestPriorityPending??0,style:{backgroundColor:$.colorError},"data-testid":"dashboard-badge-highest-priority"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{children:"High Priority"}),e.jsx(ie,{count:t.queueStats.HighPriorityPending??0,style:{backgroundColor:$.colorWarning},"data-testid":"dashboard-badge-high-priority"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{children:"Normal Priority"}),e.jsx(ie,{count:t.queueStats.NormalPriorityPending??0,style:{backgroundColor:$.colorInfo},"data-testid":"dashboard-badge-normal-priority"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ae,{children:"Low Priority"}),e.jsx(ie,{count:t.queueStats.LowPriorityPending??0,style:{backgroundColor:$.colorTextSecondary},"data-testid":"dashboard-badge-low-priority"})]})]})]})]})})]})}),1===t.featureAccess?.HasAdvancedAnalytics&&t.distributedStorageStats&&e.jsx(ze,{stats:t.distributedStorageStats}),e.jsx(U,{title:e.jsxs(F,{children:[e.jsx(L,{}),e.jsx("span",{children:"Subscription & Plans"}),t.allActiveSubscriptions&&t.allActiveSubscriptions.length>0&&e.jsx(ie,{count:t.allActiveSubscriptions.length,style:{backgroundColor:"#333333"}})]}),"data-testid":"dashboard-card-subscription-plans",children:e.jsxs(W,{gutter:[24,24],children:[e.jsx(V,{xs:24,md:8,children:t.activeSubscription?e.jsxs(F,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(Ae,{type:"secondary",style:{fontSize:12},children:"CURRENT SUBSCRIPTION"}),e.jsx(Me,{level:4,style:{margin:"8px 0"},children:t.activeSubscription.PlanName}),e.jsx(Le,{type:"secondary",style:{marginBottom:16},children:t.activeSubscription.PlanDescription}),e.jsxs(W,{gutter:[16,16],children:[e.jsx(V,{span:12,children:e.jsx(G,{title:"Active Licenses",value:t.activeSubscription.TotalActivePurchases,valueStyle:{color:$.colorText},"data-testid":"dashboard-stat-active-licenses"})}),e.jsx(V,{span:12,children:e.jsx(G,{title:"Days Remaining",value:t.activeSubscription.DaysRemaining,valueStyle:{color:t.activeSubscription.DaysRemaining<=30?$.colorError:$.colorText},"data-testid":"dashboard-stat-days-remaining"})})]})]}),!u&&o&&e.jsx("div",{style:{padding:"16px",backgroundColor:"dark"===A?$.colorBgContainer:$.colorBgLayout,borderRadius:b("LG"),border:`1px solid ${$.colorBorder}`},children:e.jsxs(F,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Ae,{strong:!0,children:"Monthly Cost"}),e.jsxs(Me,{level:3,style:{margin:0},"data-testid":"dashboard-stat-monthly-cost",children:["$",(()=>{let e=0;return t.allActiveSubscriptions&&t.allActiveSubscriptions.length>0?t.allActiveSubscriptions.forEach(t=>{const s=ke(o,t.planCode);null!==s&&1!==t.isTrial&&(e+=s*t.quantity)}):t.billingInfo&&t.activeSubscription&&(e=t.billingInfo.Price*(t.activeSubscription.Quantity||1)),e.toFixed(2)})()]})]}),e.jsx(Ae,{type:"secondary",children:t.allActiveSubscriptions&&t.allActiveSubscriptions.length>1?`Total from ${t.allActiveSubscriptions.length} active subscriptions`:t.billingInfo?`Billed ${t.billingInfo.BillingInterval}ly • ${t.billingInfo.Currency.toUpperCase()}`:"Monthly subscription cost"}),1===t.activeSubscription?.IsTrial&&e.jsx(X,{color:"blue",children:"Trial Period"})]})})]}):e.jsx(te,{description:"No active subscription"})}),t.allActiveSubscriptions&&t.allActiveSubscriptions.length>0&&e.jsx(V,{xs:24,md:8,children:e.jsxs(F,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(Ae,{type:"secondary",style:{fontSize:12},children:"ALL ACTIVE LICENSES"}),e.jsxs(Me,{level:4,style:{margin:"8px 0"},children:[t.allActiveSubscriptions.length," Total"]})]}),e.jsx("div",{style:{maxHeight:200,overflowY:"auto"},children:e.jsx(F,{direction:"vertical",size:"small",style:{width:"100%"},children:t.allActiveSubscriptions.map((t,s)=>e.jsxs("div",{style:{padding:"12px",backgroundColor:"dark"===A?$.colorBgContainer:$.colorBgLayout,borderRadius:6,border:`1px solid ${$.colorBorder}`},"data-testid":`dashboard-license-item-${s}`,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs(F,{children:[e.jsx(Ae,{strong:!0,children:t.planName}),e.jsx(ie,{count:`×${t.quantity}`,style:{backgroundColor:"#52c41a"}}),1===t.isTrial&&e.jsx(X,{color:"blue",children:"Trial"})]}),e.jsxs(Ae,{type:t.daysRemaining<=30?"danger":"secondary",style:{fontSize:12},children:[t.daysRemaining," ",1===t.daysRemaining?"day":"days"," remaining"]})]}),e.jsx(K,{title:`From ${new Date(t.startDate).toLocaleDateString()} to ${new Date(t.endDate).toLocaleDateString()}`,children:e.jsx(Y,{"data-testid":`dashboard-progress-subscription-${t.planCode}`,percent:(()=>{const e=new Date(t.startDate),s=new Date(t.endDate),a=new Date;if(a<e)return 0;if(a>s)return 100;const i=s.getTime()-e.getTime(),r=a.getTime()-e.getTime(),n=Math.max(0,Math.min(100,r/i*100));return Math.round(n)})(),showInfo:!1,size:"small",strokeColor:t.daysRemaining<=30?"dark"===A?"#ff6b6b":$.colorError:"dark"===A?"#7d9b49":$.colorPrimary})})]},s))})})]})}),t.availablePlans.length>0&&e.jsx(V,{xs:24,md:t.allActiveSubscriptions&&t.allActiveSubscriptions.length>0?8:16,children:e.jsxs(F,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(Ae,{type:"secondary",style:{fontSize:12},children:(()=>{const e=t.availablePlans.find(e=>1===e.IsCurrentPlan);return e&&"ELITE"!==e.PlanCode?"UPGRADE OPTIONS":"AVAILABLE PLANS"})()}),e.jsx(Me,{level:4,style:{margin:"8px 0"},children:"Choose Your Plan"})]}),e.jsx(F,{direction:"vertical",size:"small",style:{width:"100%"},children:(()=>{const s=["COMMUNITY","ADVANCED","PREMIUM","ELITE"],a=t.availablePlans.find(e=>1===e.IsCurrentPlan),i=a?s.indexOf(a.PlanCode):-1;return t.availablePlans.filter(e=>s.indexOf(e.PlanCode)>=i).map(t=>e.jsx("div",{style:{padding:"12px 16px",backgroundColor:1===t.IsCurrentPlan?"dark"===A?$.colorBgElevated:$.colorBgContainer:"dark"===A?$.colorBgContainer:$.colorBgLayout,borderRadius:6,border:1===t.IsCurrentPlan?`2px solid ${$.colorPrimary}`:`1px solid ${$.colorBorder}`},"data-testid":`dashboard-plan-item-${t.PlanCode.toLowerCase()}`,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs(F,{children:[e.jsx(Ae,{strong:!0,children:t.PlanName}),1===t.IsCurrentPlan&&e.jsx(X,{color:"success",children:"Current"})]}),e.jsxs(Ae,{type:"secondary",style:{fontSize:12,display:"block",marginTop:4},children:["Up to ",t.MaxUsers," users • ",t.Description]})]}),!u&&o&&(()=>{const s=ke(o,t.PlanCode);return null!==s&&e.jsx(Ae,{strong:!0,style:{fontSize:16,minWidth:80,textAlign:"right"},children:0===s?"Free":`$${s}/mo`})})()]})},t.PlanCode))})()})]})})]})})]})]});var de};export{_e as default};
