{
  "id": "monitoring_prometheus-grafana",
  "name": "Prometheus + Grafana Monitoring Template",
  "description": "Complete monitoring stack with Prometheus metrics collection and Grafana visualization.",
  "category": "monitoring",
  "tags": ["monitoring", "prometheus-grafana"],
  "files": [
    {
      "name": ".env",
      "path": "prometheus-grafana/.env",
      "type": "environment",
      "content": "# Network Mode Configuration\n# Options:\n#   bridge - Isolated network, multiple instances supported (default)\n#   host   - Shared host network, checkpoint-compatible (for live migration)\nNETWORK_MODE=bridge\n\n# Note: Host networking required for Docker checkpoint/restore support\n# Bridge mode recommended for development and multi-instance deployments\n\n# Container Configuration\nCONTAINER_NAME=monitoring\n\n# Prometheus Configuration\nPROMETHEUS_RETENTION=15d\n\n# Grafana Configuration\nGRAFANA_ADMIN_USER=admin\nGRAFANA_ADMIN_PASSWORD=admin\nGRAFANA_ALLOW_SIGN_UP=false\nGRAFANA_PLUGINS="
    },
    {
      "name": "README.md",
      "path": "prometheus-grafana/README.md",
      "type": "markdown",
      "content": "# Prometheus + Grafana Monitoring Template\n\nComplete monitoring stack with Prometheus metrics collection and Grafana visualization.\n\n## Features\n\n- Prometheus time-series database with configurable retention\n- Grafana visualization with pre-configured Prometheus data source\n- Node Exporter for system-level metrics (CPU, memory, disk)\n- Persistent data storage with automatic provisioning\n- Ready to add custom application metrics\n\n## Usage\n\n```bash\nsource Rediaccfile\nprep  # Pull images and create directories\nup    # Start monitoring stack\ndown  # Stop and cleanup\n```\n\n## Configuration\n\nEdit `.env` to customize:\n\n**Prometheus Settings:**\n- `PROMETHEUS_PORT`: Web UI port (default: 9090)\n- `PROMETHEUS_RETENTION`: Data retention period (default: 15d)\n\n**Grafana Settings:**\n- `GRAFANA_PORT`: Web UI port (default: 3000)\n- `GRAFANA_ADMIN_USER`: Admin username (default: admin)\n- `GRAFANA_ADMIN_PASSWORD`: Admin password (default: admin)\n- `GRAFANA_ALLOW_SIGN_UP`: Allow user registration (default: false)\n- `GRAFANA_PLUGINS`: Comma-separated plugin list (optional)\n\n**Node Exporter:**\n- `NODE_EXPORTER_PORT`: Metrics endpoint port (default: 9100)\n\n## Access\n\n**Prometheus:**\n- Port: 9090 (Docker auto-assigns host port)\n- No authentication required\n- Find assigned port: `docker compose ps`\n\n**Grafana:**\n- Port: 3000 (Docker auto-assigns host port)\n- Default credentials: admin/admin (change on first login)\n- Prometheus data source pre-configured\n\n**Node Exporter:**\n- Port: 9100 (metrics endpoint)\n- Access metrics at: http://localhost:9100/metrics\n\nTo add custom metrics, edit `prometheus/prometheus.yml` to add scrape targets, then reload config with `curl -X POST http://localhost:9090/-/reload`.\n\n## Resources\n\n- [Prometheus on Docker Hub](https://hub.docker.com/r/prom/prometheus)\n- [Grafana on Docker Hub](https://hub.docker.com/r/grafana/grafana)\n- [Prometheus Documentation](https://prometheus.io/docs/)\n- [Grafana Documentation](https://grafana.com/docs/)\n- [Node Exporter Documentation](https://github.com/prometheus/node_exporter)"
    },
    {
      "name": "Rediaccfile",
      "path": "prometheus-grafana/Rediaccfile",
      "type": "text",
      "content": "#!/bin/bash\n\n# === Renet Compose Support ===\n_use_renet() {\n  [[ -n \"$REPOSITORY_NETWORK_ID\" ]] && command -v renet &>/dev/null\n}\n_compose() {\n  if _use_renet; then\n    renet compose --network-id \"$REPOSITORY_NETWORK_ID\" -- \"$@\"\n  else\n    docker compose \"$@\"\n  fi\n}\n\nprep() {\n    echo \"Pulling Prometheus and Grafana images...\"\n    docker pull prom/prometheus:latest\n    docker pull grafana/grafana:latest\n\n    echo \"Creating directories...\"\n    mkdir -p ./prometheus/data\n    mkdir -p ./grafana/data\n    chmod 777 ./prometheus/data\n    chmod 777 ./grafana/data\n\n    return $?\n}\n\nup() {\n    if [ -f .env ]; then\n        source .env\n    fi\n\n    echo \"Starting Prometheus and Grafana...\"\n    _compose up -d\n\n    echo \"Waiting for services to be ready...\"\n    sleep 10\n\n    echo \"Prometheus is running on http://localhost:${PROMETHEUS_PORT:-9090}\"\n    echo \"Grafana is running on http://localhost:${GRAFANA_PORT:-3000}\"\n    echo \"Default Grafana credentials: admin / ${GRAFANA_ADMIN_PASSWORD:-admin}\"\n\n    return $?\n}\n\ndown() {\n    echo \"Stopping Prometheus and Grafana...\"\n    _compose down -v\n    return $?\n}"
    },
    {
      "name": "docker-compose.yaml",
      "path": "prometheus-grafana/docker-compose.yaml",
      "type": "yaml",
      "content": "services:\n  prometheus:\n    image: prom/prometheus:latest\n    container_name: ${CONTAINER_NAME}-prometheus\n    restart: always\n    network_mode: \"${NETWORK_MODE:-bridge}\"\n    command:\n      - --config.file=/etc/prometheus/prometheus.yml\n      - --storage.tsdb.path=/prometheus\n      - --web.console.libraries=/usr/share/prometheus/console_libraries\n      - --web.console.templates=/usr/share/prometheus/consoles\n      - --web.enable-lifecycle\n      - --storage.tsdb.retention.time=${PROMETHEUS_RETENTION}\n    ports:\n      - \"9090\"\n    volumes:\n      - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml:ro\n      - ./prometheus/data:/prometheus\n    healthcheck:\n      test: [\"CMD-SHELL\", \"wget --spider --quiet http://localhost:9090/-/healthy\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 30s\n\n  grafana:\n    image: grafana/grafana:latest\n    container_name: ${CONTAINER_NAME}-grafana\n    restart: always\n    network_mode: \"${NETWORK_MODE:-bridge}\"\n    environment:\n      GF_SECURITY_ADMIN_USER: ${GRAFANA_ADMIN_USER}\n      GF_SECURITY_ADMIN_PASSWORD: ${GRAFANA_ADMIN_PASSWORD}\n      GF_USERS_ALLOW_SIGN_UP: ${GRAFANA_ALLOW_SIGN_UP}\n      GF_INSTALL_PLUGINS: ${GRAFANA_PLUGINS}\n    ports:\n      - \"3000\"\n    volumes:\n      - ./grafana/data:/var/lib/grafana\n      - ./grafana/provisioning:/etc/grafana/provisioning:ro\n    healthcheck:\n      test: [\"CMD-SHELL\", \"curl -f http://localhost:3000/api/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 30s\n    depends_on:\n      prometheus:\n        condition: service_healthy\n\n  node-exporter:\n    image: prom/node-exporter:latest\n    container_name: ${CONTAINER_NAME}-node-exporter\n    restart: always\n    network_mode: \"${NETWORK_MODE:-bridge}\"\n    command:\n      - --path.procfs=/host/proc\n      - --path.sysfs=/host/sys\n      - --path.rootfs=/host\n      - --collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)\n    ports:\n      - \"9100\"\n    volumes:\n      - /proc:/host/proc:ro\n      - /sys:/host/sys:ro\n      - /:/host:ro\n    healthcheck:\n      test: [\"CMD-SHELL\", \"wget --spider --quiet http://localhost:9100/\"]\n      interval: 10s\n      timeout: 10s\n      retries: 3\n      start_period: 15s"
    }
  ],
  "readme": "# Prometheus + Grafana Monitoring Template\n\nComplete monitoring stack with Prometheus metrics collection and Grafana visualization.\n\n## Features\n\n- Prometheus time-series database with configurable retention\n- Grafana visualization with pre-configured Prometheus data source\n- Node Exporter for system-level metrics (CPU, memory, disk)\n- Persistent data storage with automatic provisioning\n- Ready to add custom application metrics\n\n## Usage\n\n```bash\nsource Rediaccfile\nprep  # Pull images and create directories\nup    # Start monitoring stack\ndown  # Stop and cleanup\n```\n\n## Configuration\n\nEdit `.env` to customize:\n\n**Prometheus Settings:**\n- `PROMETHEUS_PORT`: Web UI port (default: 9090)\n- `PROMETHEUS_RETENTION`: Data retention period (default: 15d)\n\n**Grafana Settings:**\n- `GRAFANA_PORT`: Web UI port (default: 3000)\n- `GRAFANA_ADMIN_USER`: Admin username (default: admin)\n- `GRAFANA_ADMIN_PASSWORD`: Admin password (default: admin)\n- `GRAFANA_ALLOW_SIGN_UP`: Allow user registration (default: false)\n- `GRAFANA_PLUGINS`: Comma-separated plugin list (optional)\n\n**Node Exporter:**\n- `NODE_EXPORTER_PORT`: Metrics endpoint port (default: 9100)\n\n## Access\n\n**Prometheus:**\n- Port: 9090 (Docker auto-assigns host port)\n- No authentication required\n- Find assigned port: `docker compose ps`\n\n**Grafana:**\n- Port: 3000 (Docker auto-assigns host port)\n- Default credentials: admin/admin (change on first login)\n- Prometheus data source pre-configured\n\n**Node Exporter:**\n- Port: 9100 (metrics endpoint)\n- Access metrics at: http://localhost:9100/metrics\n\nTo add custom metrics, edit `prometheus/prometheus.yml` to add scrape targets, then reload config with `curl -X POST http://localhost:9090/-/reload`.\n\n## Resources\n\n- [Prometheus on Docker Hub](https://hub.docker.com/r/prom/prometheus)\n- [Grafana on Docker Hub](https://hub.docker.com/r/grafana/grafana)\n- [Prometheus Documentation](https://prometheus.io/docs/)\n- [Grafana Documentation](https://grafana.com/docs/)\n- [Node Exporter Documentation](https://github.com/prometheus/node_exporter)",
  "generated": "2026-01-16T09:43:38Z"
}
