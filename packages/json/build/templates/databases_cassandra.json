{
  "id": "databases_cassandra",
  "name": "Apache Cassandra Database Template",
  "description": "Distributed NoSQL database designed for handling large amounts of data with high availability and no single point of failure.",
  "category": "databases",
  "tags": ["databases", "cassandra"],
  "files": [
    {
      "name": ".env",
      "path": "cassandra/.env",
      "type": "environment",
      "content": "# Network Mode Configuration\n# Options:\n#   bridge - Isolated network, multiple instances supported (default)\n#   host   - Shared host network, checkpoint-compatible (for live migration)\nNETWORK_MODE=bridge\n\n# Note: Host networking required for Docker checkpoint/restore support\n# Bridge mode recommended for development and multi-instance deployments\n\n# Cassandra Configuration\nCONTAINER_NAME=cassandra-db\nCASSANDRA_CLUSTER_NAME=MyCluster\nCASSANDRA_DC=datacenter1\nCASSANDRA_RACK=rack1\nCASSANDRA_ENDPOINT_SNITCH=GossipingPropertyFileSnitch\nCASSANDRA_NUM_TOKENS=256\n\n# Authentication & Authorization\n# PasswordAuthenticator enables username/password authentication\n# AllowAllAuthenticator disables authentication (not recommended)\nCASSANDRA_AUTHENTICATOR=PasswordAuthenticator\nCASSANDRA_AUTHORIZER=CassandraAuthorizer\n\n# Note: Default credentials are cassandra/cassandra\n# Change these immediately in production by connecting via cqlsh"
    },
    {
      "name": "README.md",
      "path": "cassandra/README.md",
      "type": "markdown",
      "content": "# Apache Cassandra Database Template\n\nDistributed NoSQL database designed for handling large amounts of data with high availability and no single point of failure.\n\n## Features\n\n- Apache Cassandra 5.0 with authentication enabled\n- Persistent data storage with automatic initialization\n- CQL shell access and client connectivity\n- Health checks for container readiness\n- Sample keyspace and schema included\n\n## Usage\n\n```bash\nsource Rediaccfile\nprep  # Pull images and create directories\nup    # Start Cassandra\ndown  # Stop and cleanup\n```\n\n## Configuration\n\nEdit `.env` to customize:\n- `CONTAINER_NAME`: Container name (default: cassandra-db)\n- `CASSANDRA_CLUSTER_NAME`: Cluster name (default: MyCluster)\n- `CASSANDRA_DC`: Datacenter name (default: datacenter1)\n- `CASSANDRA_RACK`: Rack name (default: rack1)\n- `CASSANDRA_ENDPOINT_SNITCH`: Snitch implementation (default: GossipingPropertyFileSnitch)\n- `CASSANDRA_NUM_TOKENS`: Number of tokens (default: 256)\n- `CASSANDRA_AUTHENTICATOR`: Authentication method (default: PasswordAuthenticator)\n- `CASSANDRA_AUTHORIZER`: Authorization method (default: CassandraAuthorizer)\n\n**Default credentials:** Username `cassandra`, Password `cassandra` (change in production)\n\n## Access\n\n**Port:** 9042 (Docker auto-assigns host port)\n\n**Find assigned port:**\n```bash\ndocker compose ps\n```\n\n**CQL Shell:**\n```bash\ndocker exec -it cassandra-db cqlsh -u cassandra -p cassandra\n```\n\n**Connection details:**\n- Host: localhost\n- Username: cassandra\n- Password: cassandra\n- Datacenter: datacenter1\n- Keyspace: myapp (pre-created)\n\n**Check cluster status:**\n```bash\ndocker exec -it cassandra-db nodetool status\n```\n\n**Note:** Cassandra takes 30-60 seconds to fully start. Wait for \"Created default superuser role\" in logs.\n\n## Resources\n\n- [Official Docker Hub](https://hub.docker.com/_/cassandra)\n- [Official Documentation](https://cassandra.apache.org/doc/latest/)\n- [CQL Reference](https://cassandra.apache.org/doc/latest/cassandra/cql/)\n- [DataStax Drivers](https://docs.datastax.com/en/driver-matrix/docs/index.html)"
    },
    {
      "name": "Rediaccfile",
      "path": "cassandra/Rediaccfile",
      "type": "text",
      "content": "#!/bin/bash\n\n# === Renet Compose Support ===\n_use_renet() {\n  [[ -n \"$REPOSITORY_NETWORK_ID\" ]] && command -v renet &>/dev/null\n}\n_compose() {\n  if _use_renet; then\n    renet compose --network-id \"$REPOSITORY_NETWORK_ID\" -- \"$@\"\n  else\n    docker compose \"$@\"\n  fi\n}\n\nprep() {\n    echo \"Pulling Cassandra image...\"\n    docker pull cassandra:5.0\n\n    echo \"Creating data directory...\"\n    mkdir -p ./data\n    chmod 755 ./data\n\n    return $?\n}\n\nup() {\n    if [ -f .env ]; then\n        source .env\n    fi\n\n    echo \"Starting Cassandra server...\"\n    echo \"Note: Cassandra may take 30-60 seconds to fully start\"\n    _compose up -d\n\n    echo \"\"\n    echo \"Waiting for Cassandra to be ready...\"\n    echo \"You can check the status with: docker logs -f ${CONTAINER_NAME:-cassandra-db}\"\n\n    return $?\n}\n\ndown() {\n    echo \"Stopping Cassandra server...\"\n    _compose down -v\n    return $?\n}"
    },
    {
      "name": "docker-compose.yaml",
      "path": "cassandra/docker-compose.yaml",
      "type": "yaml",
      "content": "services:\n  cassandra:\n    image: cassandra:5.0\n    container_name: ${CONTAINER_NAME}\n    restart: always\n    network_mode: \"${NETWORK_MODE:-bridge}\"\n    environment:\n      CASSANDRA_CLUSTER_NAME: ${CASSANDRA_CLUSTER_NAME}\n      CASSANDRA_DC: ${CASSANDRA_DC}\n      CASSANDRA_RACK: ${CASSANDRA_RACK}\n      CASSANDRA_ENDPOINT_SNITCH: ${CASSANDRA_ENDPOINT_SNITCH}\n      CASSANDRA_NUM_TOKENS: ${CASSANDRA_NUM_TOKENS}\n      CASSANDRA_AUTHENTICATOR: ${CASSANDRA_AUTHENTICATOR}\n      CASSANDRA_AUTHORIZER: ${CASSANDRA_AUTHORIZER}\n    ports:\n      - \"9042\"\n    volumes:\n      - ./data:/var/lib/cassandra\n      - ./init-cassandra.cql:/docker-entrypoint-initdb.d/init.cql:ro\n    healthcheck:\n      test: [\"CMD-SHELL\", \"cqlsh -u cassandra -p cassandra -e 'DESCRIBE KEYSPACES;' || exit 1\"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n      start_period: 60s"
    },
    {
      "name": "init-cassandra.cql",
      "path": "cassandra/init-cassandra.cql",
      "type": "text",
      "content": "-- This script runs when Cassandra starts for the first time\n-- It creates a keyspace and table with sample data\n\n-- Create keyspace with SimpleStrategy (for single datacenter)\n-- For production multi-datacenter, use NetworkTopologyStrategy\nCREATE KEYSPACE IF NOT EXISTS myapp\nWITH replication = {\n  'class': 'SimpleStrategy',\n  'replication_factor': 1\n};\n\n-- Switch to the keyspace\nUSE myapp;\n\n-- Create users table\nCREATE TABLE IF NOT EXISTS users (\n  user_id UUID PRIMARY KEY,\n  username TEXT,\n  email TEXT,\n  created_at TIMESTAMP,\n  last_login TIMESTAMP\n);\n\n-- Create index on email for efficient lookups\nCREATE INDEX IF NOT EXISTS ON users (email);\n\n-- Insert sample data\nINSERT INTO users (user_id, username, email, created_at, last_login)\nVALUES (uuid(), 'sample_user', 'user@example.com', toTimestamp(now()), toTimestamp(now()));\n\n-- Create a simple counter table example\nCREATE TABLE IF NOT EXISTS page_views (\n  page_name TEXT PRIMARY KEY,\n  view_count COUNTER\n);\n\n-- Note: You cannot INSERT into counter columns, only UPDATE\n-- Example: UPDATE page_views SET view_count = view_count + 1 WHERE page_name = 'homepage';"
    }
  ],
  "readme": "# Apache Cassandra Database Template\n\nDistributed NoSQL database designed for handling large amounts of data with high availability and no single point of failure.\n\n## Features\n\n- Apache Cassandra 5.0 with authentication enabled\n- Persistent data storage with automatic initialization\n- CQL shell access and client connectivity\n- Health checks for container readiness\n- Sample keyspace and schema included\n\n## Usage\n\n```bash\nsource Rediaccfile\nprep  # Pull images and create directories\nup    # Start Cassandra\ndown  # Stop and cleanup\n```\n\n## Configuration\n\nEdit `.env` to customize:\n- `CONTAINER_NAME`: Container name (default: cassandra-db)\n- `CASSANDRA_CLUSTER_NAME`: Cluster name (default: MyCluster)\n- `CASSANDRA_DC`: Datacenter name (default: datacenter1)\n- `CASSANDRA_RACK`: Rack name (default: rack1)\n- `CASSANDRA_ENDPOINT_SNITCH`: Snitch implementation (default: GossipingPropertyFileSnitch)\n- `CASSANDRA_NUM_TOKENS`: Number of tokens (default: 256)\n- `CASSANDRA_AUTHENTICATOR`: Authentication method (default: PasswordAuthenticator)\n- `CASSANDRA_AUTHORIZER`: Authorization method (default: CassandraAuthorizer)\n\n**Default credentials:** Username `cassandra`, Password `cassandra` (change in production)\n\n## Access\n\n**Port:** 9042 (Docker auto-assigns host port)\n\n**Find assigned port:**\n```bash\ndocker compose ps\n```\n\n**CQL Shell:**\n```bash\ndocker exec -it cassandra-db cqlsh -u cassandra -p cassandra\n```\n\n**Connection details:**\n- Host: localhost\n- Username: cassandra\n- Password: cassandra\n- Datacenter: datacenter1\n- Keyspace: myapp (pre-created)\n\n**Check cluster status:**\n```bash\ndocker exec -it cassandra-db nodetool status\n```\n\n**Note:** Cassandra takes 30-60 seconds to fully start. Wait for \"Created default superuser role\" in logs.\n\n## Resources\n\n- [Official Docker Hub](https://hub.docker.com/_/cassandra)\n- [Official Documentation](https://cassandra.apache.org/doc/latest/)\n- [CQL Reference](https://cassandra.apache.org/doc/latest/cassandra/cql/)\n- [DataStax Drivers](https://docs.datastax.com/en/driver-matrix/docs/index.html)",
  "generated": "2026-01-16T09:43:38Z"
}
