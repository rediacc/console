{
  "id": "platforms_gitlab",
  "name": "GitLab CE (Community Edition) Template",
  "description": "Self-hosted Git repository manager with CI/CD, issue tracking, and more.",
  "category": "platforms",
  "tags": ["platforms", "gitlab"],
  "files": [
    {
      "name": ".env",
      "path": "gitlab/.env",
      "type": "environment",
      "content": "# Network Mode Configuration\n# Options:\n#   bridge - Isolated network, multiple instances supported (default)\n#   host   - Shared host network, checkpoint-compatible (for live migration)\nNETWORK_MODE=bridge\n\n# Note: Host networking required for Docker checkpoint/restore support\n# Bridge mode recommended for development and multi-instance deployments\n\n# GitLab Configuration\nCONTAINER_NAME=gitlab\nGITLAB_HOSTNAME=localhost\nGITLAB_HTTP_PORT=80\nGITLAB_HTTPS_PORT=443\nGITLAB_SSH_PORT=2222\n\n# Additional GitLab Omnibus configuration (optional)\n# Example: GITLAB_OMNIBUS_CONFIG=\"gitlab_rails['time_zone'] = 'UTC';\"\nGITLAB_OMNIBUS_CONFIG="
    },
    {
      "name": "README.md",
      "path": "gitlab/README.md",
      "type": "markdown",
      "content": "# GitLab CE (Community Edition) Template\n\nSelf-hosted Git repository manager with CI/CD, issue tracking, and more.\n\n## Features\n- Web-based Git repository management with built-in CI/CD pipelines\n- Issue tracking, project management, and wiki documentation\n- Container registry and merge request workflows\n- Persistent storage for repositories, configs, and logs\n- Minimum 4GB RAM required (8GB recommended)\n\n## Usage\n```bash\nsource Rediaccfile\nprep  # Pull images and create directories\nup    # Start GitLab CE\ndown  # Stop and cleanup\n```\n\n**Initial Setup:**\n1. Wait 5-10 minutes for first-time initialization\n2. Get root password: `docker exec -it gitlab grep 'Password:' /etc/gitlab/initial_root_password`\n3. Login at http://localhost with username `root`\n4. Change password immediately\n\n## Configuration\nEdit `.env` to customize:\n- `CONTAINER_NAME`: Container name (default: gitlab)\n- `GITLAB_HOSTNAME`: Hostname for GitLab (default: localhost)\n- `GITLAB_HTTP_PORT`: HTTP port (default: 80)\n- `GITLAB_HTTPS_PORT`: HTTPS port (default: 443)\n- `GITLAB_SSH_PORT`: SSH port for Git operations (default: 2222)\n- `GITLAB_OMNIBUS_CONFIG`: Additional Omnibus configuration (see docs)\n\n**Common Configuration Examples:**\n```bash\n# Enable container registry\nGITLAB_OMNIBUS_CONFIG=\"registry_external_url 'http://localhost:5000'; gitlab_rails['registry_enabled'] = true;\"\n\n# Reduce memory usage\nGITLAB_OMNIBUS_CONFIG=\"postgresql['shared_buffers'] = '256MB'; sidekiq['concurrency'] = 5; prometheus_monitoring['enable'] = false;\"\n```\n\n## Access\n- **Web Interface**: http://localhost (or configured HTTP port)\n- **Default username**: root\n- **Initial password**: See `./config/initial_root_password` or extract via docker exec\n- **Git SSH**: `git clone ssh://git@localhost:2222/username/project.git`\n- **Git HTTP**: `git clone http://localhost/username/project.git`\n- **Find ports**: `docker compose ps`\n\n**Quick Commands:**\n```bash\n# Create backup\ndocker exec -t gitlab gitlab-backup create\n\n# Monitor logs\ndocker logs -f gitlab\n\n# Access GitLab Rails console\ndocker exec -it gitlab gitlab-rails console\n```\n\n## Resources\n- [Official Docker Hub](https://hub.docker.com/r/gitlab/gitlab-ce)\n- [Official Documentation](https://docs.gitlab.com/ee/install/docker.html)\n- [GitLab Runner Setup](https://docs.gitlab.com/runner/install/docker.html)\n- [Omnibus Configuration](https://docs.gitlab.com/omnibus/settings/)"
    },
    {
      "name": "Rediaccfile",
      "path": "gitlab/Rediaccfile",
      "type": "text",
      "content": "#!/bin/bash\n\n# === Renet Compose Support ===\n_use_renet() {\n  [[ -n \"$REPOSITORY_NETWORK_ID\" ]] && command -v renet &>/dev/null\n}\n_compose() {\n  if _use_renet; then\n    renet compose --network-id \"$REPOSITORY_NETWORK_ID\" -- \"$@\"\n  else\n    docker compose \"$@\"\n  fi\n}\n\nprep() {\n    echo \"Pulling GitLab CE image...\"\n    docker pull gitlab/gitlab-ce:latest\n\n    echo \"Creating directories...\"\n    mkdir -p ./config\n    mkdir -p ./logs\n    mkdir -p ./data\n    chmod -R 755 ./config ./logs ./data\n\n    echo \"Note: GitLab requires significant resources (4GB+ RAM recommended)\"\n\n    return $?\n}\n\nup() {\n    if [ -f .env ]; then\n        source .env\n    fi\n\n    echo \"Starting GitLab CE...\"\n    _compose up -d\n\n    echo \"\"\n    echo \"GitLab is starting... This may take several minutes on first run.\"\n    echo \"You can monitor the startup with: docker logs -f ${CONTAINER_NAME}\"\n    echo \"\"\n    echo \"GitLab will be available at:\"\n    echo \"  HTTP: http://localhost:${GITLAB_HTTP_PORT}\"\n    echo \"  HTTPS: https://localhost:${GITLAB_HTTPS_PORT}\"\n    echo \"  SSH: ssh://git@localhost:${GITLAB_SSH_PORT}\"\n    echo \"\"\n    echo \"Initial root password will be in: ./config/initial_root_password\"\n    echo \"This file will be automatically deleted after 24 hours.\"\n\n    return $?\n}\n\ndown() {\n    if [ -f .env ]; then\n        source .env\n    fi\n\n    echo \"Stopping GitLab CE...\"\n    _compose down -v\n    return $?\n}"
    },
    {
      "name": "docker-compose.yaml",
      "path": "gitlab/docker-compose.yaml",
      "type": "yaml",
      "content": "services:\n  gitlab:\n    image: gitlab/gitlab-ce:latest\n    container_name: ${CONTAINER_NAME}\n    restart: always\n    network_mode: \"${NETWORK_MODE:-bridge}\"\n    hostname: ${GITLAB_HOSTNAME}\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'http://${GITLAB_HOSTNAME}:${GITLAB_HTTP_PORT}'\n        gitlab_rails['gitlab_shell_ssh_port'] = ${GITLAB_SSH_PORT}\n        ${GITLAB_OMNIBUS_CONFIG}\n    ports:\n      - \"${GITLAB_HTTP_PORT}:80\"\n      - \"${GITLAB_HTTPS_PORT}:443\"\n      - \"${GITLAB_SSH_PORT}:22\"\n    volumes:\n      - ./config:/etc/gitlab\n      - ./logs:/var/log/gitlab\n      - ./data:/var/opt/gitlab\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost/-/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 6\n      start_period: 180s"
    }
  ],
  "readme": "# GitLab CE (Community Edition) Template\n\nSelf-hosted Git repository manager with CI/CD, issue tracking, and more.\n\n## Features\n- Web-based Git repository management with built-in CI/CD pipelines\n- Issue tracking, project management, and wiki documentation\n- Container registry and merge request workflows\n- Persistent storage for repositories, configs, and logs\n- Minimum 4GB RAM required (8GB recommended)\n\n## Usage\n```bash\nsource Rediaccfile\nprep  # Pull images and create directories\nup    # Start GitLab CE\ndown  # Stop and cleanup\n```\n\n**Initial Setup:**\n1. Wait 5-10 minutes for first-time initialization\n2. Get root password: `docker exec -it gitlab grep 'Password:' /etc/gitlab/initial_root_password`\n3. Login at http://localhost with username `root`\n4. Change password immediately\n\n## Configuration\nEdit `.env` to customize:\n- `CONTAINER_NAME`: Container name (default: gitlab)\n- `GITLAB_HOSTNAME`: Hostname for GitLab (default: localhost)\n- `GITLAB_HTTP_PORT`: HTTP port (default: 80)\n- `GITLAB_HTTPS_PORT`: HTTPS port (default: 443)\n- `GITLAB_SSH_PORT`: SSH port for Git operations (default: 2222)\n- `GITLAB_OMNIBUS_CONFIG`: Additional Omnibus configuration (see docs)\n\n**Common Configuration Examples:**\n```bash\n# Enable container registry\nGITLAB_OMNIBUS_CONFIG=\"registry_external_url 'http://localhost:5000'; gitlab_rails['registry_enabled'] = true;\"\n\n# Reduce memory usage\nGITLAB_OMNIBUS_CONFIG=\"postgresql['shared_buffers'] = '256MB'; sidekiq['concurrency'] = 5; prometheus_monitoring['enable'] = false;\"\n```\n\n## Access\n- **Web Interface**: http://localhost (or configured HTTP port)\n- **Default username**: root\n- **Initial password**: See `./config/initial_root_password` or extract via docker exec\n- **Git SSH**: `git clone ssh://git@localhost:2222/username/project.git`\n- **Git HTTP**: `git clone http://localhost/username/project.git`\n- **Find ports**: `docker compose ps`\n\n**Quick Commands:**\n```bash\n# Create backup\ndocker exec -t gitlab gitlab-backup create\n\n# Monitor logs\ndocker logs -f gitlab\n\n# Access GitLab Rails console\ndocker exec -it gitlab gitlab-rails console\n```\n\n## Resources\n- [Official Docker Hub](https://hub.docker.com/r/gitlab/gitlab-ce)\n- [Official Documentation](https://docs.gitlab.com/ee/install/docker.html)\n- [GitLab Runner Setup](https://docs.gitlab.com/runner/install/docker.html)\n- [Omnibus Configuration](https://docs.gitlab.com/omnibus/settings/)",
  "generated": "2026-01-16T09:43:38Z"
}
