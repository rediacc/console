{"id":"platforms_nextcloud-aio","name":"Nextcloud All-in-One","description":"Official Nextcloud All-in-One deployment with master container orchestration for complete self-hosted cloud platform.","category":"platforms","tags":["platforms","nextcloud-aio"],"files":[{"name":".env","path":"nextcloud-aio/.env","type":"environment","content":"# Nextcloud All-in-One Configuration\n# Most configuration is done through the web interface after startup\n\n# Docker socket path (for systems with custom Docker instances per repository)\n# Default: /var/run/docker.sock\nDOCKER_HOST=/var/run/docker.sock\n\n# Network mode for Docker (default: bridge)\nNETWORK_MODE=bridge\n\n# Optional: Custom data directory location\n# Leave empty to use default location managed by master container\nNEXTCLOUD_DATADIR=\n\n# Optional: Custom Apache port binding\n# Leave empty for default behavior\nAPACHE_PORT=\n\n# Optional: IP address binding for reverse proxy setups\n# Example: 127.0.0.1 for localhost-only access\nAPACHE_IP_BINDING="},{"name":"README.md","path":"nextcloud-aio/README.md","type":"markdown","content":"# Nextcloud All-in-One\n\nOfficial Nextcloud All-in-One deployment with master container orchestration for complete self-hosted cloud platform.\n\n## Features\n- Master container manages entire Nextcloud stack (web, database, cache, optional services)\n- Built-in PostgreSQL, Redis, Apache with optimized PHP configuration\n- Automatic HTTPS with Let's Encrypt certificate management\n- Optional components: Collabora Office, Talk, ClamAV, Full-text Search\n- Web-based management interface with backup/restore capabilities\n\n## Usage\n```bash\nsource Rediaccfile\nprep  # Pull master container image\nup    # Start Nextcloud AIO\ndown  # Stop Nextcloud AIO\n```\n\n## Configuration\nEdit `.env` to customize:\n- `DOCKER_HOST`: Docker socket path (default: `/var/run/docker.sock`)\n  - Use custom path for systems with per-repository Docker instances\n- `NEXTCLOUD_DATADIR`: Custom data directory location (optional)\n- `APACHE_PORT`: Custom Apache port binding (default: auto-assigned)\n- `APACHE_IP_BINDING`: IP address binding for reverse proxy setups (optional)\n\n## Access\n- **Management Interface**: Auto-assigned port (find with `docker compose ps`)\n  - Default: `https://localhost:<port>` (self-signed certificate)\n- **Initial Setup**: Follow web interface wizard to configure domain, admin account, and optional services\n- **Nextcloud Access**: Port 443 (HTTPS) after configuration via management interface\n\n## Important Notes\n- **Docker Socket**: This template requires Docker socket access for the master container to orchestrate other containers\n  - Configurable via `DOCKER_HOST` environment variable\n  - Defaults to `/var/run/docker.sock` for standard Docker installations\n- **Single Domain**: AIO requires one domain for all services (simplifies SSL/TLS management)\n- **Volume Requirements**: Uses named volume with local bind driver pointing to `./aio-config` for portability\n- **First Run**: Complete setup via web interface - configuration is managed through UI, not environment variables\n\n## Resources\n- [Official Documentation](https://github.com/nextcloud/all-in-one)\n- [Docker Hub](https://github.com/nextcloud/all-in-one/pkgs/container/all-in-one)\n- [Nextcloud Homepage](https://nextcloud.com)"},{"name":"Rediaccfile","path":"nextcloud-aio/Rediaccfile","type":"text","content":"#!/bin/bash\n\n# === Renet Compose Support ===\n_use_renet() {\n  [[ -n \"$REPOSITORY_NETWORK_ID\" ]] && command -v renet &>/dev/null\n}\n_compose() {\n  if _use_renet; then\n    renet compose --network-id \"$REPOSITORY_NETWORK_ID\" -- \"$@\"\n  else\n    docker compose \"$@\"\n  fi\n}\n\n# Nextcloud All-in-One Lifecycle Functions\n\nprep() {\n  echo \"Pulling Nextcloud AIO master container image...\"\n  docker pull nextcloud/all-in-one:latest\n  local exit_code=$?\n  if [ $exit_code -ne 0 ]; then\n    echo \"Failed to pull image\"\n    return $exit_code\n  fi\n\n  echo \"Creating configuration directory...\"\n  mkdir -p aio-config\n  return $?\n}\n\nup() {\n  echo \"Starting Nextcloud AIO master container...\"\n  _compose up -d\n  local exit_code=$?\n  if [ $exit_code -ne 0 ]; then\n    echo \"Failed to start Nextcloud AIO\"\n    return $exit_code\n  fi\n\n  echo \"\"\n  echo \"Nextcloud AIO master container started successfully!\"\n  echo \"\"\n  echo \"Access the management interface:\"\n  echo \"  1. Run: docker compose ps\"\n  echo \"  2. Find the mapped port for 8080/tcp\"\n  echo \"  3. Open: https://localhost:<mapped-port>\"\n  echo \"\"\n  echo \"Note: The interface uses a self-signed certificate.\"\n  echo \"Complete the setup wizard to configure your Nextcloud instance.\"\n  echo \"\"\n\n  return 0\n}\n\ndown() {\n  echo \"Stopping Nextcloud AIO...\"\n  _compose down\n  return $?\n}"},{"name":"docker-compose.yaml","path":"nextcloud-aio/docker-compose.yaml","type":"yaml","content":"services:\n  nextcloud-aio-mastercontainer:\n    image: nextcloud/all-in-one:latest\n    container_name: nextcloud-aio-mastercontainer\n    init: true\n    restart: always\n    network_mode: \"${NETWORK_MODE:-bridge}\"\n    ports:\n      - \"80\"      # HTTP (ACME challenges)\n      - \"8080\"    # AIO management interface\n      - \"8443\"    # HTTPS\n    volumes:\n      - nextcloud_aio_mastercontainer:/mnt/docker-aio-config\n      - ${DOCKER_HOST:-/var/run/docker.sock}:/var/run/docker.sock:ro\n    environment:\n      - APACHE_PORT=${APACHE_PORT:-}\n      - APACHE_IP_BINDING=${APACHE_IP_BINDING:-}\n      - NEXTCLOUD_DATADIR=${NEXTCLOUD_DATADIR:-}\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"-k\", \"https://localhost:8080/\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 60s\n\nvolumes:\n  nextcloud_aio_mastercontainer:\n    name: nextcloud_aio_mastercontainer\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: ${PWD}/aio-config"}],"readme":"# Nextcloud All-in-One\n\nOfficial Nextcloud All-in-One deployment with master container orchestration for complete self-hosted cloud platform.\n\n## Features\n- Master container manages entire Nextcloud stack (web, database, cache, optional services)\n- Built-in PostgreSQL, Redis, Apache with optimized PHP configuration\n- Automatic HTTPS with Let's Encrypt certificate management\n- Optional components: Collabora Office, Talk, ClamAV, Full-text Search\n- Web-based management interface with backup/restore capabilities\n\n## Usage\n```bash\nsource Rediaccfile\nprep  # Pull master container image\nup    # Start Nextcloud AIO\ndown  # Stop Nextcloud AIO\n```\n\n## Configuration\nEdit `.env` to customize:\n- `DOCKER_HOST`: Docker socket path (default: `/var/run/docker.sock`)\n  - Use custom path for systems with per-repository Docker instances\n- `NEXTCLOUD_DATADIR`: Custom data directory location (optional)\n- `APACHE_PORT`: Custom Apache port binding (default: auto-assigned)\n- `APACHE_IP_BINDING`: IP address binding for reverse proxy setups (optional)\n\n## Access\n- **Management Interface**: Auto-assigned port (find with `docker compose ps`)\n  - Default: `https://localhost:<port>` (self-signed certificate)\n- **Initial Setup**: Follow web interface wizard to configure domain, admin account, and optional services\n- **Nextcloud Access**: Port 443 (HTTPS) after configuration via management interface\n\n## Important Notes\n- **Docker Socket**: This template requires Docker socket access for the master container to orchestrate other containers\n  - Configurable via `DOCKER_HOST` environment variable\n  - Defaults to `/var/run/docker.sock` for standard Docker installations\n- **Single Domain**: AIO requires one domain for all services (simplifies SSL/TLS management)\n- **Volume Requirements**: Uses named volume with local bind driver pointing to `./aio-config` for portability\n- **First Run**: Complete setup via web interface - configuration is managed through UI, not environment variables\n\n## Resources\n- [Official Documentation](https://github.com/nextcloud/all-in-one)\n- [Docker Hub](https://github.com/nextcloud/all-in-one/pkgs/container/all-in-one)\n- [Nextcloud Homepage](https://nextcloud.com)","generated":"2026-01-16T09:43:37Z"}
