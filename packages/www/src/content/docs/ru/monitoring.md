---
title: Мониторинг
description: >-
  Мониторинг состояния машин, контейнеров, сервисов, репозиториев и запуск
  диагностики.
category: Guides
order: 9
language: ru
sourceHash: 5a0f43834cb143a2
---

# Мониторинг

Rediacc предоставляет встроенные команды мониторинга для проверки состояния машин, запущенных контейнеров, сервисов, статуса репозиториев и системной диагностики.

## Состояние машины

Получение комплексного отчёта о состоянии машины:

```bash
rdc machine health server-1
```

Отчёт включает:
- **System**: время работы, использование диска, использование хранилища
- **Контейнеры**: количество запущенных, исправных и неисправных
- **Хранилище**: состояние SMART
- **Проблемы**: обнаруженные проблемы

Используйте `--output json` для машиночитаемого вывода.

## Список контейнеров

Просмотр всех запущенных контейнеров во всех репозиториях на машине:

```bash
rdc machine containers server-1
```

| Столбец | Описание |
|---------|----------|
| Name | Имя контейнера |
| Status | Время работы или причина остановки |
| State | Запущен, остановлен и т.д. |
| Health | Исправен, неисправен, нет |
| CPU | Процент использования CPU |
| Memory | Использование памяти / лимит |
| Repository | Репозиторий, которому принадлежит контейнер |

Параметры:
- `--health-check` — выполнить активные проверки состояния контейнеров
- `--output json` — машиночитаемый вывод в формате JSON

## Список сервисов

Просмотр systemd-сервисов, связанных с Rediacc, на машине:

```bash
rdc machine services server-1
```

| Столбец | Описание |
|---------|----------|
| Name | Имя сервиса |
| State | Активен, неактивен, сбой |
| Sub-state | Запущен, остановлен и т.д. |
| Restarts | Количество перезапусков |
| Memory | Использование памяти сервисом |
| Repository | Связанный репозиторий |

Параметры:
- `--stability-check` — пометить нестабильные сервисы (сбой, более 3 перезапусков, автоматический перезапуск)
- `--output json` — машиночитаемый вывод в формате JSON

## Список репозиториев

Просмотр репозиториев на машине с подробной статистикой:

```bash
rdc machine repos server-1
```

| Столбец | Описание |
|---------|----------|
| Name | Имя репозитория |
| Size | Размер образа диска |
| Mount | Смонтирован или размонтирован |
| Docker | Docker daemon запущен или остановлен |
| Containers | Количество контейнеров |
| Disk Usage | Фактическое использование диска внутри репозитория |
| Modified | Время последнего изменения |

Параметры:
- `--search <text>` — фильтрация по имени или пути монтирования
- `--output json` — машиночитаемый вывод в формате JSON

## Статус Vault

Получение полного обзора машины, включая информацию о развёртывании:

```bash
rdc machine vault-status server-1
```

Предоставляет:
- Имя хоста и время работы
- Использование памяти, диска и хранилища
- Общее количество репозиториев, количество смонтированных и запущенных Docker
- Подробную информацию по каждому репозиторию

Используйте `--output json` для машиночитаемого вывода.

## Проверка соединения

> **Только для облачного адаптера.** В локальном режиме используйте `rdc term server-1 -c "hostname"` для проверки подключения.

Проверка SSH-подключения к машине:

```bash
rdc machine test-connection --ip 203.0.113.50 --user deploy
```

Отчёт включает:
- Статус соединения (успешно/неудачно)
- Используемый метод аутентификации
- Конфигурацию SSH-ключа
- Статус развёртывания публичного ключа
- Запись в Known hosts

Параметры:
- `--port <number>` — SSH-порт (по умолчанию: 22)
- `--save -m server-1` — сохранить проверенный ключ хоста в конфигурации машины

## Диагностика (doctor)

Запуск комплексной диагностической проверки среды Rediacc:

```bash
rdc doctor
```

| Категория | Проверки |
|-----------|----------|
| **Окружение** | Версия Node.js, версия CLI, режим SEA, установка Go, доступность Docker |
| **Renet** | Расположение бинарного файла, версия, CRIU, rsync, встроенные ресурсы SEA |
| **Конфигурация** | Активная конфигурация, адаптер, машины, SSH-ключ |
| **Virtualization** | Checks if your system can run local virtual machines (`rdc ops`) |

Каждая проверка сообщает **OK**, **Предупреждение** или **Ошибка**. Используйте это как первый шаг при устранении любых неполадок.

Коды выхода: `0` = всё пройдено, `1` = предупреждения, `2` = ошибки.
