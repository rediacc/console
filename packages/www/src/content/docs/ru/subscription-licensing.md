---
title: "Подписка и лицензирование"
description: "Управление подписками и лицензиями машин для локальных развертываний."
category: "Guides"
order: 7
language: ru
sourceHash: "84215f54750ac4a4"
---

# Подписка и лицензирование

Машины, работающие в локальных развертываниях, нуждаются в лицензии подписки для применения ограничений ресурсов на основе плана. CLI автоматически доставляет подписанные лицензионные блобы на удаленные машины через SSH — ручная активация или облачное подключение со стороны сервера не требуется.

## Обзор

1. Войдите с помощью `rdc subscription login` (откроется браузер для аутентификации)
2. Используйте любую команду для машины — лицензии обрабатываются автоматически

Когда вы выполняете команду, направленную на машину (`rdc machine info`, `rdc repo up` и т.д.), CLI автоматически проверяет наличие действующей лицензии на машине. Если её нет, CLI получает лицензию с сервера аккаунта и доставляет её через SSH.

## Вход

```bash
rdc subscription login
```

Открывает браузер для аутентификации через поток кода устройства. После подтверждения CLI сохраняет API-токен локально в `~/.config/rediacc/api-token.json`.

| Параметр | Обязательный | По умолчанию | Описание |
|--------|----------|---------|-------------|
| `-t, --token <token>` | No | - | API-токен (пропускает поток через браузер) |
| `--server <url>` | No | `https://account.rediacc.com` | URL сервера аккаунта |

## Проверка статуса

```bash
# Статус на уровне аккаунта (план, машины)
rdc subscription status

# Включить детали лицензии с конкретной машины
rdc subscription status -m hostinger
```

Показывает детали подписки с сервера аккаунта. С параметром `-m` также подключается к машине по SSH и отображает текущую информацию о лицензии.

## Принудительное обновление лицензии

```bash
rdc subscription refresh -m <machine>
```

Принудительно перевыпускает и доставляет новую лицензию на указанную машину. Обычно это не требуется — лицензии обновляются автоматически каждые 50 минут при обычном использовании CLI.

## Как это работает

1. **Вход** сохраняет API-токен на вашей рабочей станции
2. **Любая команда для машины** запускает автоматическую проверку лицензии через SSH
3. Если удаленная лицензия отсутствует или старше 50 минут, CLI:
   - Считывает аппаратный идентификатор удаленной машины через SSH
   - Обращается к API аккаунта для выпуска новой лицензии
   - Доставляет лицензию машины и блоб подписки на удаленную машину через SSH
4. 50-минутный кэш в памяти предотвращает избыточные SSH-обращения в рамках одной сессии

Каждая активация машины занимает один слот в вашей подписке. Чтобы освободить слот, деактивируйте машину через портал аккаунта.

## Льготный период и деградация

Если лицензия истекает и не может быть обновлена в течение 3-дневного льготного периода, ограничения ресурсов машины снижаются до значений по умолчанию плана Community. После обновления лицензии (восстановите подключение и выполните любую команду `rdc`) исходные ограничения плана восстанавливаются немедленно.

## Ограничения планов

### Ограничения плавающих лицензий

| План | Floating Licenses |
|------|-------------|
| Community | 2 |
| Professional | 5 |
| Business | 20 |
| Enterprise | 50 |

### Ограничения ресурсов

| Ресурс | Community | Professional | Business | Enterprise |
|----------|-----------|--------------|----------|------------|
| Bridges | 0 | 1 | 2 | 10 |
| Max reserved jobs | 1 | 2 | 3 | 5 |
| Job timeout (hours) | 2 | 24 | 72 | 96 |
| Repository size (GB) | 10 | 100 | 500 | 2,048 |
| Jobs per month | 500 | 5,000 | 20,000 | 100,000 |
| Pending per user | 5 | 10 | 20 | 50 |
| Tasks per machine | 1 | 2 | 3 | 5 |

### Доступность функций

| Функция | Community | Professional | Business | Enterprise |
|---------|-----------|--------------|----------|------------|
| Permission groups | - | Yes | Yes | Yes |
| Queue priority | - | - | Yes | Yes |
| Advanced analytics | - | - | Yes | Yes |
| Priority support | - | Yes | Yes | Yes |
| Audit log | - | Yes | Yes | Yes |
| Advanced queue | - | - | Yes | Yes |
| Custom branding | - | Yes | Yes | Yes |
| Dedicated account | - | - | - | Yes |
