---
export interface Props {
  title: string;
  subtitle: string;
  videoSrc?: string;
  captionsSrc?: string;
  heroImage?: string;
  heroImageAlt?: string;
}

const { title, subtitle, videoSrc = '/videos/demo.mp4', captionsSrc, heroImage, heroImageAlt = '' } = Astro.props;
---

<section id="overview" class="hero-video-section">
  <div class="container">
    <div class="hero-video-content">
      <div class="hero-text">
        <h1 class="hero-title">{title}</h1>
        <p class="hero-subtitle" set:html={subtitle} />
      </div>

      {heroImage ? (
        <div class="hero-image-container">
          <img
            src={heroImage}
            alt={heroImageAlt}
            class="hero-image"
            width="1200"
            height="675"
            loading="eager"
            decoding="async"
            fetchpriority="high"
          />
        </div>
      ) : (
        <div class="video-container-inline">
          <div class="video-wrapper-inline">
            <video
              class="video-element"
              controls
              preload="metadata"
              aria-label={`${title}: ${subtitle}`}
            >
              <source src={videoSrc} type="video/mp4" />
              {captionsSrc && (
                <track kind="captions" src={captionsSrc} srcLang="en" label="English captions" />
              )}
              Your browser does not support the video tag.
            </video>
          </div>
        </div>
      )}
    </div>
  </div>
</section>

<style>
  .hero-image-container {
    margin: var(--space-8) auto;
    max-width: 900px;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, var(--opacity-10));
  }

  .hero-image {
    width: 100%;
    height: auto;
    display: block;
  }
</style>
