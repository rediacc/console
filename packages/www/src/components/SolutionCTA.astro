---
import { Image } from 'astro:assets';
import type { Language } from '../i18n/types';
import { EXTERNAL_LINKS } from '../config/constants';
import { createTranslator } from '../i18n/utils';

export interface Props {
  title: string;
  subtitle: string;
  buttonText: string;
  buttonHref?: string;
  secondaryText?: string;
  secondaryHref?: string;
  imageSrc: ImageMetadata;
  imageAlt: string;
  lang?: Language;
}

const {
  title,
  subtitle,
  buttonText,
  buttonHref,
  secondaryText,
  secondaryHref,
  imageSrc,
  imageAlt,
  lang,
} = Astro.props;

const { t } = createTranslator(lang || 'en');
const ctaLink = buttonHref || EXTERNAL_LINKS.SCHEDULE_CONSULTATION;
---

<section id="get-started" class="solution-cta">
  <div class="container">
    <div class="cta-grid">
      <div class="cta-image">
        <Image
          src={imageSrc}
          alt={imageAlt}
          loading="lazy"
          quality={90}
        />
      </div>
      <div class="cta-content">
        <h2 class="cta-title">{title}</h2>
        <p class="cta-subtitle">{subtitle}</p>
        <div class="cta-actions">
          <a href={ctaLink} target="_blank" rel="noopener noreferrer" class="btn btn-primary btn-large" aria-label={`${buttonText} (${t('common.aria.opensInNewTab')})`}>
            {buttonText}
          </a>
          {secondaryText && secondaryHref && (
            <a href={secondaryHref} class="cta-secondary-link">
              {secondaryText}
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M5 12h14M12 5l7 7-7 7" />
              </svg>
            </a>
          )}
        </div>
      </div>
    </div>
  </div>
</section>
