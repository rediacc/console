/**
 * Responsive Modal Sizing System
 * 
 * This file defines a centralized, responsive modal sizing system using CSS custom properties
 * and viewport-relative units. No pixel values are used to ensure consistent responsive behavior.
 * 
 * Usage:
 * - Add className={ModalSize.Medium} to any Modal component
 * - All sizing is handled automatically by CSS
 * - Works seamlessly across all viewport sizes
 */

:root {
  /* Modal width presets - using min() for responsive behavior without media queries */
  --modal-width-sm: min(90vw, 30rem);   /* Small modals: 90% viewport or 480px max */
  --modal-width-md: min(92vw, 45rem);   /* Medium modals: 92% viewport or 720px max */
  --modal-width-lg: min(94vw, 60rem);   /* Large modals: 94% viewport or 960px max */
  --modal-width-xl: min(96vw, 80rem);   /* Extra large: 96% viewport or 1280px max */
  --modal-width-full: min(98vw, 100rem); /* Full width: 98% viewport or 1600px max */

  /* Modal height constraints - ensuring content never overflows viewport */
  --modal-height-sm: min(85vh, 40rem);  /* Small height constraint */
  --modal-height-md: min(88vh, 50rem);  /* Medium height constraint */
  --modal-height-lg: min(90vh, 60rem);  /* Large height constraint */
  --modal-height-xl: min(92vh, 70rem);  /* Extra large height constraint */
  --modal-height-full: min(95vh, 80rem); /* Full height constraint */

  /* Modal positioning - consistent top spacing */
  --modal-top-offset: max(2vh, 1rem);   /* Responsive top spacing */

  /* Modal content spacing - using design system tokens */
  --modal-padding: clamp(1rem, 3vw, 2rem);
  --modal-header-height: 3.5rem;
  --modal-footer-height: 4rem;

  /* Modal body height calculations - accounting for header and footer */
  --modal-body-height-sm: calc(var(--modal-height-sm) - var(--modal-header-height) - var(--modal-footer-height) - 2rem);
  --modal-body-height-md: calc(var(--modal-height-md) - var(--modal-header-height) - var(--modal-footer-height) - 2rem);
  --modal-body-height-lg: calc(var(--modal-height-lg) - var(--modal-header-height) - var(--modal-footer-height) - 2rem);
  --modal-body-height-xl: calc(var(--modal-height-xl) - var(--modal-header-height) - var(--modal-footer-height) - 2rem);
  --modal-body-height-full: calc(var(--modal-height-full) - var(--modal-header-height) - var(--modal-footer-height) - 2rem);
}

/* Modal size utility classes */
.modal-sm {
  width: var(--modal-width-sm) !important;
  max-height: var(--modal-height-sm) !important;
  top: var(--modal-top-offset) !important;
}

.modal-sm .ant-modal-body {
  max-height: var(--modal-body-height-sm);
  overflow-y: auto;
}

.modal-md {
  width: var(--modal-width-md) !important;
  max-height: var(--modal-height-md) !important;
  top: var(--modal-top-offset) !important;
}

.modal-md .ant-modal-body {
  max-height: var(--modal-body-height-md);
  overflow-y: auto;
}

.modal-lg {
  width: var(--modal-width-lg) !important;
  max-height: var(--modal-height-lg) !important;
  top: var(--modal-top-offset) !important;
}

.modal-lg .ant-modal-body {
  max-height: var(--modal-body-height-lg);
  overflow-y: auto;
}

.modal-xl {
  width: var(--modal-width-xl) !important;
  max-height: var(--modal-height-xl) !important;
  top: var(--modal-top-offset) !important;
}

.modal-xl .ant-modal-body {
  max-height: var(--modal-body-height-xl);
  overflow-y: auto;
}

.modal-full {
  width: var(--modal-width-full) !important;
  max-height: var(--modal-height-full) !important;
  top: var(--modal-top-offset) !important;
}

.modal-full .ant-modal-body {
  max-height: var(--modal-body-height-full);
  overflow-y: auto;
}

/* Fullscreen modal - occupies entire browser viewport */
.modal-fullscreen {
  max-width: 100vw !important;
  width: 100vw !important;
  height: 100vh !important;
  margin: 0 !important;
  top: 0 !important;
  padding: 0 !important;
}

.modal-fullscreen .ant-modal-content {
  height: 100vh !important;
  width: 100vw !important;
  border-radius: 0 !important;
  display: flex;
  flex-direction: column;
}

.modal-fullscreen .ant-modal-header {
  flex-shrink: 0;
  border-bottom: 1px solid var(--color-border-secondary);
}

.modal-fullscreen .ant-modal-body {
  flex: 1;
  min-height: 0;
  max-height: unset !important;
  overflow-y: auto;
  padding: var(--modal-padding);
}

.modal-fullscreen .ant-modal-footer {
  flex-shrink: 0;
  border-top: 1px solid var(--color-border-secondary);
}

/* Responsive adjustments for small screens */
@media (max-width: 768px) {
  :root {
    /* On mobile, use more aggressive viewport sizing */
    --modal-width-sm: 95vw;
    --modal-width-md: 96vw;
    --modal-width-lg: 97vw;
    --modal-width-xl: 98vw;
    --modal-width-full: 99vw;
    
    /* Adjust heights for mobile viewports */
    --modal-height-sm: 80vh;
    --modal-height-md: 85vh;
    --modal-height-lg: 90vh;
    --modal-height-xl: 92vh;
    --modal-height-full: 95vh;
    
    /* Reduce padding on small screens */
    --modal-padding: 1rem;
    --modal-top-offset: 1vh;
  }
}

@media (max-width: 480px) {
  :root {
    /* Very small screens - maximize available space */
    --modal-width-sm: 98vw;
    --modal-width-md: 99vw;
    --modal-width-lg: 99vw;
    --modal-width-xl: 99vw;
    --modal-width-full: 100vw;
    
    /* More aggressive height usage on very small screens */
    --modal-height-sm: 85vh;
    --modal-height-md: 90vh;
    --modal-height-lg: 92vh;
    --modal-height-xl: 95vh;
    --modal-height-full: 98vh;
    
    /* Minimal padding and spacing */
    --modal-padding: 0.75rem;
    --modal-top-offset: 0.5vh;
    --modal-header-height: 3rem;
    --modal-footer-height: 3.5rem;
  }
}

/* Enhanced modal styling to work with the size system */
.modal-responsive {
  padding-bottom: 0 !important;
}

.modal-responsive .ant-modal-content {
  border-radius: 12px;
  overflow: hidden;
}

.modal-responsive .ant-modal-body {
  padding: var(--modal-padding);
  position: relative;
}

.modal-responsive .ant-modal-header {
  padding: var(--modal-padding);
  border-bottom: 1px solid var(--color-border-secondary);
  flex-shrink: 0;
}

.modal-responsive .ant-modal-footer {
  padding: var(--modal-padding);
  border-top: 1px solid var(--color-border-secondary);
  flex-shrink: 0;
}

/* Ensure modals work well with form content */
.modal-responsive .ant-form {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.modal-responsive .ant-form-item:last-child {
  margin-bottom: 0;
}

/* Special handling for modals with complex content */
.modal-responsive .modal-content-scrollable {
  height: 100%;
  overflow-y: auto;
  padding-right: 8px; /* Compensation for scrollbar */
}

.modal-responsive .modal-content-scrollable::-webkit-scrollbar {
  width: 6px;
}

.modal-responsive .modal-content-scrollable::-webkit-scrollbar-track {
  background: var(--color-fill-quaternary);
  border-radius: 3px;
}

.modal-responsive .modal-content-scrollable::-webkit-scrollbar-thumb {
  background: var(--color-fill-secondary);
  border-radius: 3px;
}

.modal-responsive .modal-content-scrollable::-webkit-scrollbar-thumb:hover {
  background: var(--color-fill-primary);
}